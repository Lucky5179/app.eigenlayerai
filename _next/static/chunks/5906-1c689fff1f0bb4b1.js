"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5906],{31821:function(e,t,r){var a=r(81438),n=r(84710),l=r(29725),o=r(4766),i=r(78130),s=r(21557),u=r(77809);t.Z=function(e){var t;let{withLink:r=!1}=e,{data:d}=(0,i.O4)(),{data:c}=u.h.operator.getIsDelegatedToBlocklist.useQuery(d),{operatorSummary:g}=(0,s.GO)(d);return c?(0,a.jsx)("div",{className:"mb-4 flex flex-col items-center justify-between gap-5 rounded-lg border bg-white px-6 py-4 text-blue-700 sm:flex-row",children:(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsx)(l.Z,{className:"h-12 w-12"}),(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsxs)(o._T,{intent:"TextXL",weight:"medium",children:[null!==(t=null==g?void 0:g.name)&&void 0!==t?t:"your selected operator"," is under review"]}),(0,a.jsx)(o._T,{intent:"TextS",children:"This operator is under review for violation of either the terms of service or the content policy. Please exercise caution. Your funds remain safe and can be delegated to a different operator at any time."})]}),r&&(0,a.jsx)(n.default,{href:"/operator/".concat(d),children:(0,a.jsx)(o.xk,{size:o.dr.SM,children:"Manage Delegation"})})]})}):null}},30520:function(e,t,r){r.d(t,{PV:function(){return k},mI:function(){return b},tF:function(){return T}});var a=r(81438),n=r(66427),l=r(11442),o=r(45632),i=r(75624),s=r(4766),u=r(2142),d=r(27196),c=r(63921),g=r(45268),v=r(38870),h=r(64087),m=r(40589),f=r(31680),p=r(3993),y=r(92355),w=r(7534);let b={address:m.stakeConfig.delegationManagerAddress,abi:u.oG,functionName:"completeQueuedWithdrawals"},k=e=>{var t,r;let{withdrawals:u,completeRedelegationForAllTokens:m=!1,enabled:y,onTxnSuccess:k,...L}=e,[B,V]=(0,n.useState)(!1),{address:x}=(0,d.Z)(),{refetch:W}=(0,c.Z)(),{data:{strategyTokenMap:E}}=(0,h.r)(),S=(0,v.U)(),{data:j,...M}=(0,g.$)({enabled:y}),[C,O]=(0,n.useState)([]),N=(0,n.useMemo)(()=>{if(!u.length||!E)return{};let e=!1,t={};for(let r of u)r.strategies.forEach((a,n)=>{var l,o,i;let s=E[a.toLowerCase()];if(!s)return;let u=BigInt(null!==(o=r.shares[n])&&void 0!==o?o:0),d=null!==(i=null==s?void 0:s.convertSharesToUnderlying(u,{format:"decimal"}))&&void 0!==i?i:0;t[l=s.symbol]||(t[l]={token:s,shares:0n,underlying:0}),t[s.symbol].shares+=u,t[s.symbol].underlying+=d,u>0n&&(e=!0)});return V(e),t},[E,u]),I=Object.keys(N).reduce((e,t)=>{let r=t.includes("-")?j.batches:j.single,a=(null==r?void 0:r[t])||{nextCompletableWithdrawalBlock:f.j5};return a.nextCompletableWithdrawalBlock<e?a.nextCompletableWithdrawalBlock:e},f.j5),P=(0,o.O)({watch:!0,query:{enabled:!!x&&B}}),A=Object.keys(N),R=(0,a.jsx)(s.Lm,{value:null===(t=N[A[0]])||void 0===t?void 0:t.underlying,format:"balance"}),q=(0,n.useMemo)(()=>E?T({withdrawals:u,receiveAsTokens:!0,strategyTokenMap:E}):void 0,[u,E]),{data:F,error:Z}=(0,i.G)({...b,args:q,query:{enabled:!!x&&!!q}});(0,n.useEffect)(()=>{(null==Z?void 0:Z.message)&&(console.error(Z.message),l.v.addError(Z.message))},[null==Z?void 0:Z.message]);let U=(0,n.useCallback)(async e=>{W(),M.refetch(),S.refetch();let t=await (0,p.Kl)(e);O(e=>[...e,...t]),null==k||k(e)},[W,M,S,k]),D=A.length>1?"".concat(A.length," tokens"):(0,a.jsxs)(a.Fragment,{children:[R," ",A[0]]}),{data:G,isPending:Q,isError:_,writeContract:H}=(0,w.Z)({loadingMsg:(0,a.jsxs)(a.Fragment,{children:["Withdrawing ",D,"..."]}),successMsg:(0,a.jsxs)(a.Fragment,{children:["Withdrew ",D,"!"]}),errorMsg:"Withdrawal submitted.",onTxnSuccess:U,...L}),K=(0,n.useMemo)(()=>E?T({withdrawals:u,receiveAsTokens:!1,strategyTokenMap:E}):void 0,[u,E]),{data:Y,error:$}=(0,i.G)({...b,args:K,query:{enabled:!!x&&!!K}});(0,n.useEffect)(()=>{(null==$?void 0:$.message)&&(console.error($.message),l.v.addError($.message))},[null==$?void 0:$.message]);let{data:z,isPending:X,isError:J,writeContract:ee}=(0,w.Z)({loadingMsg:(0,a.jsx)(a.Fragment,{children:m?"Redelegating unstaked tokens...":(0,a.jsxs)(a.Fragment,{children:["Redepositing ",D]})}),successMsg:(0,a.jsx)(a.Fragment,{children:m?"Redelegated unstaked tokens!":(0,a.jsxs)(a.Fragment,{children:["Redeposited ",D]})}),errorMsg:"Redeposit submitted.",onTxnSuccess:U,...L}),et=(0,n.useCallback)(()=>{(null==F?void 0:F.request)&&H(null==F?void 0:F.request)},[null==F?void 0:F.request,H]),er=(0,n.useCallback)(()=>{(null==Y?void 0:Y.request)&&ee(Y.request)},[null==Y?void 0:Y.request,ee]);return{completeWithdrawal:et,completeWithdrawalData:G,completeWithdrawalError:_,isCompleteWithdrawalLoading:Q,completeWithdrawalToeigenlayerAI:er,completeWithdrawalToeigenlayerAIData:z,completeWithdrawalToeigenlayerAIError:J,isCompleteWithdrawalToeigenlayerAILoading:X,withdrawalRootsCompleted:C,unstakeMenuProps:{withdrawalAmounts:N,handleCompleteWithdrawal:et,handleCompleteWithdrawalToeigenlayerAI:er,nextCompletableWithdrawalBlock:I,currentBlock:null!==(r=P.data)&&void 0!==r?r:BigInt(0n),withdrawalsLoading:M.isLoading||Q||X,completeWithdrawal:et,completeWithdrawalToeigenlayerAI:ee}}};function T(e){let{withdrawals:t=[],receiveAsTokens:r,strategyTokenMap:a}=e;return t.reduce((e,t)=>{let n=t.strategies.map(e=>{var t,r;return null!==(r=null===(t=a[e.toLowerCase()])||void 0===t?void 0:t.address)&&void 0!==r?r:f.r_});return[[...e[0],(0,y.YW)(t)],[...e[1],n],[...e[2],0n],[...e[3],r]]},[[],[],[],[]])}},21557:function(e,t,r){r.d(t,{GO:function(){return c},xw:function(){return d}});var a=r(66427),n=r(51016),l=r.n(n),o=r(64087),i=r(77809),s=r(3993),u=r(78130);let d=()=>{let{data:e,isLoading:t}=i.h.operator.getAllOperatorShares.useQuery(void 0,{staleTime:3e5,gcTime:3e5,select:e=>0===e.strategyAndShare.length?{}:e.strategyAndShare.reduce((e,t)=>(Object.entries(t).forEach(t=>{let[r,a]=t;e[r]||(e[r]=0n),e[r]+=BigInt(null!=a?a:0n)}),e),{})}),{data:{strategyTokenMap:r},isLiquidTokensLoading:s,isNativeTokenLoading:u}=(0,o.r)();return{data:(0,a.useMemo)(()=>{var t,a;if(!e||!r)return{eigenTVL:0,totalTVL:0};let o=Object.entries(e).map(e=>{let[t,a]=e,n=r[t];if(!n)return;let l=Number(n.convertSharesToUnderlying(BigInt(a),{format:"decimal"}));return{...n,ethValue:n.ethValue*l,tvl:l}}),i=l().chain(o).groupBy("group").value(),s=(0,n.sumBy)(i.native,"ethValue")+(0,n.sumBy)(i.lst,"ethValue")+(0,n.sumBy)(i.WETH,"ethValue");return{eigenTVL:null!==(a=null===(t=(0,n.find)(o,{slug:"EIGEN"}))||void 0===t?void 0:t.tvl)&&void 0!==a?a:0,totalTVL:s}},[r,e]),isLoading:s||u||t}},c=e=>{let{data:t}=(0,u.O4)(),{data:r,isLoading:d,isSuccess:c,...g}=i.h.operator.getOperatorSummary.useQuery({address:null==e?void 0:e.toLowerCase(),delegateAddress:null==t?void 0:t.toLowerCase()}),{data:{strategyTokenMap:v},isLoading:h}=(0,o.r)(),m=(0,a.useMemo)(()=>{var e,t;let a=null==r?void 0:r.shares;if(!a||!v)return{eigenTVL:0,totalTVL:0,tvl:[]};let o=Object.entries(a[0]).map(e=>{let[t,r]=e,a=v[t];if(!a)return;let n=Number(a.convertSharesToUnderlying(BigInt(r),{format:"decimal"}));return{...a,ethValue:a.ethValue*n,tvl:n}}).filter(s.hD),i=l().chain(o).groupBy("group").value(),u=(0,n.sumBy)(i.native,"ethValue")+(0,n.sumBy)(i.lst,"ethValue")+(0,n.sumBy)(i.WETH,"ethValue");return{eigenTVL:null!==(t=null===(e=(0,n.find)(o,{slug:"EIGEN"}))||void 0===e?void 0:e.tvl)&&void 0!==t?t:0,totalTVL:u,tvl:o}},[null==r?void 0:r.shares,v]);return{...g,operatorSummary:null==r?null:{...r,numStakers:(null==r?void 0:r.numStakers)||1,tvl:null==m?void 0:m.tvl,totalTVL:null==m?void 0:m.totalTVL,eigenTVL:null==m?void 0:m.eigenTVL},isOperatorLoading:h||d,isOperatorSuccess:c}};t.ZP=()=>{let{data:e,isLoading:t,isSuccess:r}=i.h.operator.getAllOperatorsWithMetadata.useQuery(void 0,{}),{data:s,isLoading:u,isSuccess:d}=i.h.operator.getAllOperatorTVLNumStakers.useQuery(void 0,{}),{data:{strategyTokenMap:c},isLiquidTokensLoading:g,isNativeTokenLoading:v}=(0,o.r)(),h=(0,a.useMemo)(()=>{var e,t;return null!==(t=null==s?void 0:null===(e=s.operatorTvlStakerData)||void 0===e?void 0:e.reduce((e,t)=>(e[t.address]=t,e),{}))&&void 0!==t?t:{}},[null==s?void 0:s.operatorTvlStakerData]),m=null==e?void 0:e.operatorMetadata,f=(0,a.useMemo)(()=>m&&h&&!g&&c?m.filter(e=>!!(null==e?void 0:e.name)).map(e=>{var t,r;let a=h[e.address],o=Object.entries(a.shares).map(e=>{let[t,r]=e,a=c[t];if(!a)return;let n=Number(a.convertSharesToUnderlying(BigInt(r),{format:"decimal"}));return{...a,ethValue:a.ethValue*n,tvl:n}}),i=l().chain(o).groupBy("group").value(),s=(0,n.sumBy)(i.native,"ethValue")+(0,n.sumBy)(i.lst,"ethValue")+(0,n.sumBy)(i.WETH,"ethValue");return{...e,numStakers:(null==a?void 0:a.numStakers)||1,numAvs:(null==a?void 0:a.numAvs)||0,tvlByGroup:i,totalTVL:s,eigenTVL:null!==(r=null===(t=(0,n.find)(o,{slug:"EIGEN"}))||void 0===t?void 0:t.tvl)&&void 0!==r?r:0}}):[],[m,h,g,c]),p=(0,a.useMemo)(()=>(0,n.reduce)(f,(e,t)=>(e.totalTVL+=t.totalTVL,e.eigenTVL+=t.eigenTVL,e),{totalTVL:0,eigenTVL:0}),[f]);return{operatorMetadata:m,isMetadataLoading:t,isMetadataSuccess:r,isTvlStakerDataLoading:u,isTvlStakerDataSuccess:d,formattedOperators:f,delegatedTvlTotal:p,isLoading:g||v||u||t}}},45268:function(e,t,r){r.d(t,{$:function(){return u}});var a=r(66427),n=r(11442),l=r(38778),o=r(27196),i=r(77809),s=r(92355);let u=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:r}=(0,o.Z)(),{enabled:u,...d}=t,{data:c}=i.h.subgraph.getBlockHead.useQuery({subgraph:"eigenlayerAI-delegation-raw-events"},{refetchInterval:5e3,trpc:{context:{skipBatch:!0}}}),g=(0,l.a)({queryKey:["allWithdrawalBucketsForWithdrawer",r,Number(null!=c?c:0)],queryFn:()=>(0,s.uP)(r),enabled:!1!==u&&!!r&&!!c,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnReconnect:!0,...d});return(0,a.useEffect)(()=>{g.error&&n.v.addError(g.error)},[g.error]),{...g,data:null!==(e=g.data)&&void 0!==e?e:{single:void 0,batches:void 0}}}},38870:function(e,t,r){r.d(t,{U:function(){return d}});var a=r(66427),n=r(77398),l=r(42140),o=r(77809),i=r(27196),s=r(45363);let u={eigenPodAddress:null,onBeaconChainUnproven:0n,onBeaconChainRestaked:0n,onBeaconChainNotRestaked:0n,inPodUnproven:0n,inPodRestakedWithdrawable:0n,inPodRestakedNotWithdrawable:0n,restakingPoints:0n,inPodFullWithdrawal:0n,totalRestakedBalance:0n,unrestakedBalance:0n,withdrawableBalance:0n,withdrawableNow:0n,withdrawableAfterCheckpoint:0n,totalUndelegatedWithdrawals:0n,totalOtherWithdrawals:0n,totalRestakableBalance:0n},d=function(){var e,t,r;let{podOwner:d,enabled:c,select:g=e=>({summary:e}),...v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:h}=(0,i.Z)(),m=null!==(r=null===(e=d||h)||void 0===e?void 0:e.toLowerCase())&&void 0!==r?r:"",f=o.h.native.pepePodSummary.useQuery({podOwner:(0,l.fr)(m)},{select:e=>g((null==e?void 0:e.eigenPodAddress)?e:u),enabled:!1!==c,...v});(0,s.lb)({subgraph:"eigen-pod-raw-events",queryKey:(0,n.Ol)(o.h.native.pepePodSummary)});let p=(0,a.useMemo)(()=>{var e;return{summary:{...u,...null===(e=f.data)||void 0===e?void 0:e.summary}}},[null===(t=f.data)||void 0===t?void 0:t.summary]);return{...f,data:p}}},7033:function(e,t,r){r.d(t,{m:function(){return i}});var a=r(66427),n=r(42371),l=r(3993),o=r(64087);let i=()=>{let{data:{liquidRestakingTokens:e,nativeRestakingToken:t},isLoading:r}=(0,o.r)(),i=(0,a.useMemo)(()=>{if(!e||!t)return null;let r=[...e,t].filter(e=>(0,l.Z1)(e));return 0===r.length?0:r.filter(l.hD).reduce((e,t)=>e+t.ethValue*Number((0,n.b)(BigInt(t.deposited.underlying),t.decimals)),0)},[e,t]);return{userTotalRestakedInETH:null!=i?i:0,isRestaked:(0,a.useMemo)(()=>!!e&&!!t&&[...e,t].some(e=>{let{deposited:t}=e;if(t)return t.underlying>0n}),[e,t]),isLoading:r,isSuccess:null!==i}}}}]);
//# sourceMappingURL=5906-1c689fff1f0bb4b1.js.map