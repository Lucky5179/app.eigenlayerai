"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3140],{63140:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=a(81438),r=a(4766),l=a(84372);function s(){return(0,n.jsxs)("div",{className:"mb-4 flex flex-col gap-4",children:[(0,n.jsx)(r._T,{intent:"DisplayS",weight:"medium",className:"text-blue-800",children:"Restake"}),(0,n.jsx)(l.Z,{page:"restake"})]})}},12166:function(e,t,a){var n=a(81438),r=a(4766),l=a(33849),s=a(77723),o=a(43424);t.Z=function(e){let{icon:t,tokenAddress:a,name:d,symbol:i,rewardsMode:u="select"}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-1 ".concat("select"===u?"":"py-2"),children:[""!==t?(0,n.jsx)(s.Z,{src:t,fill:!1,className:"h-6 w-6 rounded-full border-2 border-blue-100 bg-blue-100"}):(0,n.jsx)("div",{className:"h-6 w-6 rounded-full border-2 border-blue-100 bg-blue-300"}),(0,n.jsxs)(l.Z,{isExternalLink:!0,href:"".concat(o.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL,"/address/").concat(a),className:"hidden items-center gap-1 font-abcRepro text-TextXS text-blue-700 underline-offset-1 hover:underline md:flex",children:[(0,n.jsx)(r._T,{intent:"TextXS",weight:"medium",className:"hidden text-blue-700 underline-offset-1 lg:block",dataCypress:"dashboardTokenName",children:null!=d?d:a}),i&&(0,n.jsx)(r._T,{intent:"TextXS",className:"text-blue-400",children:i})]})]})}},83093:function(e,t,a){var n=a(81438),r=a(66427),l=a(84465),s=a(4766),o=a(12166),d=a(58529);let i=[{field:"name",headerName:"Reward tokens",resizable:!1,flex:1,minWidth:100,wrapHeaderText:!0,suppressMovable:!0,cellRenderer:e=>(0,n.jsx)(o.Z,{icon:e.data.icon,name:e.data.name,tokenAddress:e.data.address,rewardsMode:"claim",symbol:e.data.symbol})}];function u(e){let{headerTitle:t,aprData:a,rewardTokenModalTableData:o,depositOrDelegateButton:u,isOpen:c,onClose:m}=e,h=(0,r.useCallback)(()=>{m()},[c]);return(0,n.jsx)(l.fC,{open:c,children:(0,n.jsxs)(l.h_,{children:[(0,n.jsx)(l.aV,{className:"fixed top-0 z-10 flex h-screen w-screen items-center justify-center bg-black-200",onClick:h}),(0,n.jsxs)(l.VY,{className:"fixed left-1/2 top-1/2 z-20 flex h-full w-full -translate-x-1/2 -translate-y-1/2 transform flex-col items-center justify-center gap-4 rounded-lg bg-white outline-none sm:top-1/3 sm:mt-20 sm:h-[440px] sm:w-[400px]",children:[(0,n.jsx)(l.Dx,{className:"flex w-full items-center justify-between px-4 pt-4",children:(0,n.jsx)(s._T,{intent:"TextL",children:t})}),a&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,n.jsxs)(s._T,{intent:"TextS",className:"text-blue-800",children:["APR: ",a.apr,"%"]}),(0,n.jsxs)(s._T,{intent:"TextS",className:"text-blue-800",children:["Amount to restake: ",a.amountToRestake]})]}),(0,n.jsx)(d.wQ,{data:o,className:"pb-6",domLayout:"normal",rowClass:"hover:bg-blue-100 cursor-pointer",columnDefs:i,suppressRowHoverHighlight:!0,localStorageSortKey:"reward-token-modal"}),u&&(0,n.jsx)("div",{className:"flex w-full items-center justify-between gap-4 px-4 pb-4",children:u})]})]})})}u.displayName="RewardTokenModal",t.Z=(0,r.memo)(u)},65943:function(e,t,a){var n=a(81438),r=a(66427),l=a(4766),s=a(42140),o=a(77723),d=a(38648);let i=(0,r.memo)(e=>{let{tokenIcons:t,apr:a,className:i}=e,u="";if(0===t.length)return null;let c=[...t];return c.length>3&&(u="+".concat(c.length-3),c=c.slice(0,3)),(0,n.jsxs)("div",{className:"flex h-6 items-center gap-2",children:[(0,n.jsxs)("div",{className:(0,s.cn)("relative h-6",i),style:{width:24+(Math.min(t.length,4)-1)*8},children:[c.map((e,t)=>(0,n.jsx)("div",{children:""!==e?(0,n.jsx)(o.Z,{src:e,fill:!1,className:"absolute h-6 w-6 rounded-full border-2 border-blue-100 bg-blue-100",style:{left:"".concat(8*t,"px")}}):(0,n.jsx)("div",{className:"absolute h-6 w-6 rounded-full border-2 border-blue-100 bg-blue-300",style:{left:"".concat(8*t,"px")}})},t)),u&&(0,n.jsx)("div",{className:"absolute",style:{left:"".concat(8*c.length,"px")},children:(0,n.jsx)(l._T,{intent:"TextXS",className:"absolute flex h-6 w-6 items-center justify-center rounded-full border-2 border-blue-100 bg-white text-blue-400",children:u})},"count")]}),a?(0,n.jsx)(l._T,{intent:"TextXS",className:"ml-1 text-blue-800",children:(0,d.so)(a)?(0,n.jsx)(r.Fragment,{children:(0,n.jsx)(l.Lm,{value:100*Number(a),format:"percentage"})}):"N/A"}):null]})});i.displayName="TokenIconDisplay",t.Z=i},84372:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(81438),r=a(66427),l=a(4766),s=a(58529),o=a(33849),d=a(83093),i=a(77723),u=a(27196),c=a(77809),m=a(38648),h=e=>{let{data:t}=c.h.rewards.getEarnableTokensForStrategy.useQuery(e,{enabled:e.length>0,staleTime:3e5,trpc:{context:{skipBatch:!0}}});return{earnableTokens:(0,r.useMemo)(()=>t?t.rewards.map(e=>{let{strategyAddress:t,tokenAddresses:a}=e;return{strategyAddress:t,tokenAddresses:(0,m.TL)(a)}}):[],[t]),isEarnableTokensSuccess:!0,isEarnableTokensLoading:!1}},b=a(1569),p=a(30696),f=a(64087),g=a(69794),x=a(33791),v=a(40589),y=a(65943);let w=e=>[{field:"name",headerName:"Asset",resizable:!1,flex:2,minWidth:100,wrapHeaderText:!0,suppressMovable:!0,cellRenderer:e=>(0,n.jsxs)(o.Z,{href:"/restake/".concat(e.data.slug),className:"mx-auto flex h-full items-center gap-2",children:[(0,n.jsx)(i.Z,{src:e.data.icon,symbol:e.data.symbol,size:l.dr.XS}),(0,n.jsx)(l._T,{intent:"TextXS",weight:"medium",className:"hidden truncate text-blue-700 underline-offset-1 lg:block",dataCypress:"dashboardTokenName",children:e.value}),(0,n.jsx)(l._T,{intent:"TextXS",className:"text-blue-400 sm:text-blue-400",children:e.data.symbol})]}),headerComponent:s.sj},{field:"symbol",headerName:"Symbol",resizable:!1,suppressMovable:!0,hide:!0},{field:"balance",headerName:"Wallet Balance",resizable:!1,suppressMovable:!0,wrapHeaderText:!0,autoHeight:!0,valueFormatter:e=>{let{value:t}=e;return Number(t).toString()},comparator:(e,t)=>Number(e)-Number(t),type:"rightAligned",headerClass:"ag-eigen-header-right",cellRenderer:e=>(0,n.jsx)(s.bL,{...e,format:"balance",dataCypress:"".concat(e.data.symbol,"-balance"),showDash:(null==e?void 0:e.data.symbol)==="ETH",decimals:e.data.decimals}),headerComponent:s.sj},{field:"underlying",headerName:"Restaked Balance",resizable:!1,suppressMovable:!0,wrapHeaderText:!1,autoHeight:!0,width:150,valueFormatter:e=>{let{value:t}=e;return Number(t).toString()},comparator:(e,t)=>Number(e)-Number(t),type:"rightAligned",headerClass:"ag-eigen-header-right",cellRenderer:e=>(0,n.jsx)(s.bL,{...e,format:"balance",dataCypress:"".concat(e.data.symbol,"-restake"),decimals:e.data.decimals}),headerComponent:s.sj},{field:"tvl",headerName:"Total Value Restaked",resizable:!1,suppressMovable:!0,wrapHeaderText:!1,autoHeight:!0,maxWidth:180,valueFormatter:e=>{let{value:t}=e;return Number(t).toString()},comparator:(e,t)=>Number(e)-Number(t),type:"rightAligned",headerClass:"ag-eigen-header-right",cellRenderer:e=>(0,n.jsx)(s.bL,{...e,dataCypress:"".concat(e.data.symbol,"-tvl"),format:"tvl",decimals:e.data.decimals}),headerComponent:s.sj},{field:"rewardTokens",headerName:"REWARD TOKENS",resizable:!1,suppressMovable:!0,wrapHeaderText:!1,autoHeight:!0,width:150,comparator:(e,t)=>{var a,n;return(null!==(a=null==e?void 0:e.length)&&void 0!==a?a:0)-(null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0)},type:"rightAligned",headerClass:"ag-eigen-header-right",cellClass:"reward-token-cell",cellRenderer:e=>e.value.length>0?(0,n.jsx)(l.xk,{intent:"pill",size:l.dr.XS,className:"mr-6 flex h-8 items-center justify-center rounded-3xl p-1.5",ref:t=>{t&&(t.onclick=t=>{t.stopPropagation(),t.preventDefault(),e.data.onRewardTokenClick(e.data.symbol,e.data.rewardTokens)})},children:(0,n.jsx)(y.Z,{tokenIcons:e.data.rewardTokens.map(e=>e.icon)})}):(0,n.jsx)(l._T,{intent:"TextXS",className:"mr-6 text-blue-400",children:"-"}),headerComponent:s.sj}];function k(e){let{page:t="",tableHeight:a="h-[890px]",rowSelection:l="single",onRowSelected:o}=e,i=(0,p.Z)(),{isConnected:c}=(0,u.Z)(),{data:{liquidRestakingTokens:m,nativeRestakingToken:y},isLoading:k}=(0,f.r)(),{data:{liquidBalances:T,nativeEthBalance:N},isLoading:j}=(0,x.Z)(),{data:C,isLoading:S}=(0,g.Z)({}),{earnableTokens:A,isEarnableTokensSuccess:L,isEarnableTokensLoading:R}=h([...v.stakeConfig.stakingTokenList.map(e=>e.strategyAddress),v.stakeConfig.nativeToken.strategyAddress]),{isRewardTokenModalOpen:Z,rewardTokenModalData:M,toggleRewardTokenModal:_,onRewardTokenClick:E,depositModalButton:H}=(0,b.Z)(),W=k||j||R||S,I=(0,r.useMemo)(()=>{var e,t,a,n;if(!T||!L||!y||!m||S)return[];let r=m.map((e,t)=>{var a;return{...e,underlying:e.deposited.underlying,balance:T[t],rewardTokens:(null==A?void 0:null===(a=A.find(t=>(null==t?void 0:t.strategyAddress)===e.strategyAddress.toLowerCase()))||void 0===a?void 0:a.tokenAddresses)||[],onRewardTokenClick:E}});return[{...y,underlying:y.deposited.underlying,completableWithdrawalAmount:null==C?void 0:null===(e=C[y.address])||void 0===e?void 0:e.completableWithdrawalAmount,pendingWithdrawalAmount:null==C?void 0:null===(t=C[y.address])||void 0===t?void 0:t.pendingWithdrawalAmount,pendingWithdrawals:null==C?void 0:null===(a=C[y.address])||void 0===a?void 0:a.pendingWithdrawals,balance:N,rewardTokens:(null==A?void 0:null===(n=A.find(e=>(null==e?void 0:e.strategyAddress)===v.stakeConfig.nativeToken.strategyAddress.toLowerCase()))||void 0===n?void 0:n.tokenAddresses)||[],onRewardTokenClick:E},...r]},[T,L,y,m,N,A,S,C,E]),O=(0,r.useMemo)(()=>w(c),[c]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{headerTitle:"Reward tokens for ".concat(M.symbol),isOpen:Z,onClose:_,rewardTokenModalTableData:M.rewardTokens,depositOrDelegateButton:H}),(0,n.jsx)(s.wQ,{tableWrapperClassName:a,isLoading:W,search:!0,pagination:!0,paginationPageSize:20,rowSelection:l,filter:[{value:"All",label:"All",default:!0},{value:"ETH & LST",label:"ETH & LSTs",default:!1},{value:"Other",label:"Other",default:!1}],filterValueComparator:(e,t)=>e&&"ETH & LST"===t?"native"===e.group||"lst"===e.group:!e||"Other"!==t||"native"!==e.group&&"lst"!==e.group,onRowSelected:e=>{if(o){o(e);return}let t=null==e?void 0:e.data;(null==t?void 0:t.symbol)&&i.push("/restake/".concat(null==t?void 0:t.slug))},data:I,rowClass:"hover:bg-blue-100 cursor-pointer",columnDefs:O,localStorageSortKey:"table-".concat(t,"-filter"),customOnGridReady:(e,t)=>{c&&!t?e.api.applyColumnState({state:[{colId:"balance",sort:"desc"}]}):e.api.applyColumnState({state:[{colId:"earnedTokens",sort:"desc"}]})}})]})}},1569:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(81438),r=a(66427),l=a(4766),s=a(30696);function o(){let e=(0,s.Z)(),[t,a]=(0,r.useState)(!1),[o,d]=(0,r.useState)({symbol:"",rewardTokens:[]}),i=(0,r.useCallback)(()=>a(e=>!e),[a]),u=(0,r.useCallback)((e,t)=>{i(),d({symbol:e,rewardTokens:t})},[i,d]),c=(0,r.useMemo)(()=>(0,n.jsx)(l.xk,{intent:"primary",className:"w-full uppercase",onClick:()=>"ETH"===o.symbol?e.push("/restake/ETH"):e.push("/restake/".concat(o.symbol,"?action=deposit")),children:"Restake ".concat(o.symbol)}),[o.symbol,e]);return{isRewardTokenModalOpen:t,setIsRewardTokenModalOpen:a,rewardTokenModalData:o,setRewardTokenModalData:d,toggleRewardTokenModal:i,onRewardTokenClick:u,depositModalButton:c}}},30696:function(e,t,a){var n=a(83062),r=a(61842);t.Z=()=>{let e=(0,n.useRouter)(),{impersonationAddress:t}=(0,r.Z)(),a=(e,t,a)=>{let n=new URL(e,window.location.origin),r=new URLSearchParams(n.search);return a&&r.set(t,a),n.search=r.toString(),n.toString()};return{...e,push:n=>{if(t){let r=a(n,"impersonate",t);e.push(r)}else e.push(n)},replace:n=>{if(t){let r=a(n,"impersonate",t);e.replace(r)}else e.replace(n)}}}},69794:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(38778),r=a(92355),l=a(27196);function s(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:t}=(0,l.Z)();return(0,n.a)({queryKey:["uncompletedWithdrawalsForWithdrawerForAllTokens",t],queryFn:()=>t?(0,r.eL)(t):Promise.reject({}),enabled:!!t,refetchOnMount:"always",...e})}},33791:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(66427),r=a(44493),l=a(37791),s=a(33376),o=a(77809),d=a(27196);function i(){let{address:e,isConnected:t}=(0,d.Z)(),{data:a=[]}=o.h.token.getTokens.useQuery({include_native:!1}),{data:i,isLoading:u}=(0,l.N)({allowFailure:!1,contracts:a.map(t=>({address:t.address,abi:r.Wo,functionName:"balanceOf",args:e?[e]:void 0})),query:{enabled:t&&a.length>0}}),{data:{value:c}={value:0n},isLoading:m}=(0,s.K)({address:e,query:{enabled:t}});return{data:{liquidBalances:(0,n.useMemo)(()=>i||a.map(()=>0n),[i,a]),nativeEthBalance:c},isLoading:u||m,isLiquidBalancesLoading:u,isNativeBalanceLoading:m}}},38648:function(e,t,a){a.d(t,{A$:function(){return o},TL:function(){return i},_f:function(){return s},so:function(){return d}});var n=a(11442),r=a(42140),l=a(3993);let s=e=>e?o(e.flatMap(e=>e.tokens)):[],o=e=>e?e.map(e=>{var t,a;let n=(0,l.M1)(e.tokenAddress);return n?{name:n.name,address:e.tokenAddress,symbol:n.symbol,icon:n.icon,weiAmount:BigInt(null!==(a=e.weiAmount)&&void 0!==a?a:0)}:{name:(0,r.Xn)(e.tokenAddress),address:e.tokenAddress,symbol:"",icon:"",weiAmount:BigInt(null!==(t=e.weiAmount)&&void 0!==t?t:0)}}).filter(e=>e.weiAmount>0n):[],d=e=>{let t=e<.1;return t||n.v.addError({message:"APR is greater than 0.1: ".concat(e)}),t},i=e=>e.map(e=>(0,l.M1)(e)||{name:(0,r.Xn)(e),slug:"",address:e,types:["reward"],strategyAddress:"0x",symbol:"",icon:"",decimals:18,rebasing:!1,apiID:"",group:"token",usedForPoints:!1,about:""})},33376:function(e,t,a){a.d(t,{K:function(){return d}});var n=a(25164),r=a(10082),l=a(91590),s=a(45172),o=a(75945);function d(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:d,query:i={}}=a,u=(0,o.Z)(a),c=(0,s.x)({config:u}),m=function(e,t={}){return{async queryFn({queryKey:t}){let{address:a,scopeKey:r,...l}=t[1];if(!a)throw Error("address is required");return await (0,n.s)(e,{...l,address:a})??null},queryKey:function(e={}){return["balance",(0,r.OP)(e)]}(t)}}(u,{...a,chainId:null!==(e=a.chainId)&&void 0!==e?e:c}),h=!!(d&&(null===(t=i.enabled)||void 0===t||t));return(0,l.aM)({...i,...m,enabled:h})}},37791:function(e,t,a){a.d(t,{N:function(){return i}});var n=a(29985),r=a(10082),l=a(66427),s=a(91590),o=a(45172),d=a(75945);function i(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{contracts:a=[],query:i={}}=t,u=(0,d.Z)(t),c=(0,o.x)({config:u}),m=function(e,t={}){return{async queryFn({queryKey:a}){let r=[],l=a[1].contracts.length;for(let e=0;e<l;e++){let n=a[1].contracts[e],l=(t.contracts?.[e]).abi;r.push({...n,abi:l})}let{scopeKey:s,...o}=a[1];return(0,n.J)(e,{...o,contracts:r})},queryKey:function(e={}){let t=[];for(let a of e.contracts??[]){let{abi:n,...r}=a;t.push({...r,chainId:r.chainId??e.chainId})}return["readContracts",(0,r.OP)({...e,contracts:t})]}(t)}}(u,{...t,chainId:c}),h=(0,l.useMemo)(()=>{var e;let t=!1;for(let e of a){let{abi:a,address:n,functionName:r}=e;if(!a||!n||!r){t=!1;break}t=!0}return!!(t&&(null===(e=i.enabled)||void 0===e||e))},[a,i.enabled]);return(0,s.aM)({...m,...i,enabled:h,structuralSharing:null!==(e=i.structuralSharing)&&void 0!==e?e:r.if})}}}]);
//# sourceMappingURL=3140-be089540f2566d8a.js.map