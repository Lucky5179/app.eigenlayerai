"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{3982:function(e,t,s){s.d(t,{k:function(){return u}});var a=s(81438),n=s(66427),l=s(96559),r=s(68121),i=s(4766),o=s(33849);function d(e){let{navItems:t}=e;return(0,a.jsx)("div",{className:"flex flex-row items-center gap-2",children:t.map(e=>{let{href:t,label:s}=e;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(o.Z,{href:t,className:"center rounded border border-transparent p-1 text-blue-400 outline-none hover:bg-blue-700/5 hover:text-blue-700 focus:border-blue-700 focus:bg-blue-700/5 active:border-transparent active:bg-blue-700/10 [&:nth-last-child(2)]:pointer-events-none [&:nth-last-child(2)]:text-blue-700",children:(0,a.jsx)(i._T,{intent:"TextS",className:"line-clamp-1 truncate font-light",children:s})}),(0,a.jsx)(l.Z,{className:"center h-4 w-4 text-blue-400 last:hidden"})]},t)})})}function u(e){let{navItems:t,address:s}=e,n=(0,i.pm)();return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d,{navItems:t}),(0,a.jsxs)(i._T,{intent:"TextS",weight:"medium",className:"hidden cursor-pointer items-center gap-1 tabular-nums text-gray-400 hover:text-gray-500 sm:flex",onClick:()=>{navigator.clipboard.writeText(s),n.info((0,a.jsx)(i._T,{intent:"TextS",font:"ibmPlexMono",children:"Address copied!"}),{id:"copy"})},children:[(0,a.jsx)(i.Lp,{address:s}),(0,a.jsx)(r.Z,{className:"h-4 w-4"})]})]})}},75732:function(e,t,s){var a=s(81438),n=s(84465),l=s(4766),r=s(30696);t.Z=function(e){let{title:t="Under Maintenance",description:s="This page is currently under maintenance. Please check back later."}=e,i=(0,r.Z)();return(0,a.jsx)(n.fC,{open:!0,children:(0,a.jsxs)(n.h_,{children:[(0,a.jsx)(n.aV,{className:"bg-overlayDarkBg fixed top-0 flex h-screen w-screen items-center justify-center backdrop-blur-2xl"}),(0,a.jsxs)(n.VY,{className:"bg-secondaryBg fixed left-1/2 top-1/3 flex h-auto w-full max-w-xl -translate-x-1/2 -translate-y-1/2 transform flex-col gap-4 rounded p-4 outline-none sm:w-[500px]",children:[(0,a.jsx)(n.Dx,{children:(0,a.jsx)(l._T,{intent:"DisplayXS",children:t})}),(0,a.jsx)(n.dk,{className:"",children:s}),(0,a.jsx)(l.xk,{size:l.dr.SM,onClick:()=>i.back(),className:"w-full",children:"Back"})]})]})})}},89832:function(e,t,s){s.d(t,{D:function(){return r}});var a=s(81438),n=s(4766),l=s(33849);function r(e){let{address:t,name:s,logo:r}=e;return(0,a.jsxs)(l.Z,{href:"/operator/".concat(t),className:"flex items-center gap-1.5 font-abcRepro text-TextS font-medium after:content-['_↗'] hover:underline",children:[(0,a.jsx)("img",{src:r||"/tokenIcon/beaconChainETH.svg",onError:e=>{e.currentTarget.src="/tokenIcon/beaconChainETH.svg"},height:20,width:20,alt:"operator logo",className:"h-5 w-5 rounded object-contain"}),s||(0,a.jsx)(n.Lp,{address:t})]})}},95011:function(e,t,s){var a=s(81438),n=s(66427),l=s(73244),r=s(4766),i=s(32725),o=s(70163),d=s(22102),u=s(78130),c=s(19842),m=s(21557),h=s(34023),x=s(72918),b=s(43424);t.Z=function(e){var t,s,f;let{buttonContainerId:p,delegateOnly:g,onDone:v,token:w}=e,j=(0,x.ZP)(e=>e.approvalTransaction),N=(0,x.ZP)(e=>e.transaction),y=(0,x.ZP)(e=>e.delegationTransaction),k=(0,x.ZP)(e=>e.updateDelegationTransaction),T=(0,x.ZP)(e=>e.resetFailedTransactions),[S,D]=(0,n.useState)(!1),{formattedOperators:P,delegatedTvlTotal:E,isLoading:M}=(0,m.ZP)(),[L,C]=(0,n.useState)(null),{isDelegated:Z}=(0,u.O4)(),{delegateTo:A}=(0,u.cp)({operatorAddress:null==L?void 0:L.address,isDelegated:Z,name:null==L?void 0:L.name,disableToast:!0}),{deposit:_,manualDeposit:I}=(0,c.Q)({token:w,inputAmount:null!==(t=N.bigintAmount)&&void 0!==t?t:0n,interact:"deposit",onTxnSuccess:()=>{null==A||A()}}),{approve:W,approvalAmount:O,allowanceRefetch:R}=(0,d.o)({tokenAddress:null==w?void 0:w.address,interact:"deposit",onTxnSuccess:async()=>{await R(),null==I||I()}}),B=(null!=O?O:0n)<(null!==(s=N.bigintAmount)&&void 0!==s?s:0n),q=()=>{D(!0),g?null==A||A():B?null==W||W():N.status===i.TransactionStatus.Success?null==A||A():null==_||_()},F=document.getElementById(null!=p?p:x.Bn),U=(0,n.useMemo)(()=>{var e;let t=[{status:y.status,blockNumber:y.blockNumber,hash:y.hash,label:"Delegate",subLabel:null!==(e=y.operatorName)&&void 0!==e?e:(0,a.jsx)(r.Lp,{className:"before:content-['_'] after:content-['_↗']",address:y.operatorAddress}),write:A}];return!g&&(t.unshift({status:N.status,blockNumber:N.blockNumber,hash:N.hash,label:"Deposit",subLabel:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Lm,{value:N.amount,format:"balance"})," ",w.symbol]}),write:_}),(B||j.status!==i.TransactionStatus.NotStarted)&&t.unshift({status:j.status,blockNumber:j.blockNumber,hash:j.hash,label:"Approve",subLabel:w.symbol,write:W})),t},[j,W,B,N,w,_,y,A,g]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex h-full w-full flex-col pb-2",children:[(0,a.jsx)("div",{className:"mb-5 gap-2 text-white",children:(0,a.jsx)(r._T,{intent:"DisplayM",className:"block text-white",children:"Delegate to an operator"})}),(0,a.jsx)(o.Z,{delegatedTvlTotal:E,operators:P,isOperatorsLoading:M,tableHeight:"h-full",rowSelection:"single",onRowSelected:e=>{let{node:t,data:s}=e;t.isSelected()&&s&&(C(s),k({operatorName:s.name,operatorAddress:s.address}))},handleDelegate:q,openInNewTab:!0})]}),F&&(0,l.createPortal)((0,a.jsxs)(a.Fragment,{children:[!g&&(0,a.jsxs)(r._T,{weight:"medium",className:"mr-5 hidden sm:inline-block",children:[(0,a.jsx)(r.Lm,{value:null!==(f=N.amount)&&void 0!==f?f:0,format:"balance"})," ",w.symbol]}),(0,a.jsx)(r.xk,{className:"text-white",size:r.dr.SM,disabled:!L||Z,type:"button",onClick:q,children:"SUBMIT"})]}),F),(0,a.jsx)(r.Co,{transactions:U,title:g?"Delegate":"Deposit & delegate",resetFailedTransactions:T,successModal:!g&&(0,a.jsx)(h.Z,{symbol:null==w?void 0:w.symbol,tokenSlug:null==w?void 0:w.slug,tokenData:w,mode:"deposit",setIsOpen:D}),showDone:g,isOpen:S,setIsOpen:D,onDone:v,blockExplorerURL:b.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL})]})}},34023:function(e,t,s){var a=s(81438),n=s(66427),l=s(92332),r=s(15721),i=s(44001),o=s(4766),d=s(2142),u=s(12166),c=s(33849),m=s(89832),h=s(70806),x=s(63506),b=s(93134),f=s(4725),p=s(40589),g=s(31680),v=s(38648),w=s(72918),j=s(43424);t.Z=function(e){var t,s;let{mode:N,tokenData:y,setIsOpen:k}=e,T="deposit"===N,S="queueNativeWithdrawal"===N,D=(0,w.ZP)(e=>e.transaction),P=(0,w.ZP)(e=>e.delegationTransaction),{estimatedDelegationRewardAPR:E,estimatedDelegationReward:M}=(0,x.Z)(),L=(0,w.ZP)(e=>e.resetAll),C=(0,w.ZP)(e=>e.setIsRestakeModalOpen),[Z,A]=(0,n.useState)([]);(0,n.useEffect)(()=>{M&&M.length>0&&A(M)},[M,P.status]);let{amount:_,blockNumber:I}=D,W=(0,a.jsx)(o.Lm,{value:null!=_?_:void 0,format:"balance"}),{operatorSummary:O,isLoading:R}=(0,b.Z)(),B={address:p.stakeConfig.delegationManagerAddress,abi:d.oG,functionName:"getWithdrawalDelay",args:[[null!==(t=null==y?void 0:y.strategyAddress)&&void 0!==t?t:g.r_]]},{data:q}=(0,i.u)(B),F=I&&q?I+q:null,{data:U}=(0,f.F)({targetBlock:F});return(0,a.jsxs)("div",{className:"flex w-full flex-col rounded-lg bg-white sm:max-w-lg",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 p-6",children:[(0,a.jsx)(l.Z,{className:"center h-16 w-16 text-emerald-600"}),(0,a.jsxs)(o._T,{intent:"DisplayXS",weight:"medium",children:["You've ",S?"queued":T?"restaked":"unstaked"," ",W," ",y.symbol,S&&" for withdrawal"]}),(0,a.jsx)(o._T,{intent:"TextS",className:"text-blue-400",children:T?"":"Your stake has been entered into a withdrawal queue for security purposes and will be available to withdraw in 7 days."}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border border-blue-100 p-4",children:[(0,a.jsxs)(o._T,{intent:"TextXS",font:"ibmPlexMono",className:"text-blue-400",children:["AMOUNT ",T?"RESTAKED":"UNSTAKED"]}),(0,a.jsxs)(o._T,{intent:"DisplayXS",weight:"medium",children:[(0,a.jsx)("span",{children:W})," ",(0,a.jsx)("span",{className:"text-blue-400",children:y.symbol})]}),(0,a.jsx)("hr",{className:"border-blue-100"}),T&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o._T,{intent:"TextXS",font:"ibmPlexMono",className:"text-blue-400",children:"RESTAKED TO"}),R?(0,a.jsx)(o.yg,{intent:"TextS",className:"w-24"}):(0,a.jsx)(o._T,{intent:"TextS",weight:"medium",children:(0,a.jsx)(m.D,{name:null==O?void 0:O.name,address:null==O?void 0:O.address,logo:null==O?void 0:O.address})})]}),!T&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o._T,{intent:"TextXS",font:"ibmPlexMono",className:"text-blue-400",children:"AVAILABLE IN"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),(0,a.jsx)("a",{href:"".concat(j.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL,"/block/").concat(F),target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:(0,a.jsx)(o._T,{intent:"TextS",weight:"medium",children:U?"~".concat(U):"-"})})]})]}),(0,a.jsx)("hr",{className:"border-blue-100"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(o._T,{intent:"TextXS",font:"ibmPlexMono",className:"text-blue-400",children:[T?"TOTAL":"REMAINING"," RESTAKED"," ",S?"IN EIGENPOD":"BALANCE"]}),y?(0,a.jsxs)(o._T,{intent:"TextS",weight:"medium",children:[(0,a.jsx)(o.Lm,{value:null!==(s=y.formatWithDecimals(y.deposited.underlying))&&void 0!==s?s:0,format:"balance"})," ",(0,a.jsx)("span",{className:"text-blue-400",children:y.symbol})]}):(0,a.jsx)(o.yg,{intent:"TextS",className:"w-24"})]}),(0,a.jsx)("hr",{className:"border-blue-100"}),T&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h.Z,{}),(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsx)(o._T,{intent:"TextS",weight:"medium",children:(0,v.so)(null!=E?E:0)?(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(o.Lm,{value:100*Number(null!=E?E:0),format:"balance"}),"%"]}):"N/A"})})]})]}),T&&Z.length>0&&(0,a.jsxs)("div",{className:"& flex min-h-36 flex-col gap-2 rounded-lg py-4",children:[(0,a.jsx)(o._T,{intent:"TextXS",font:"ibmPlexMono",className:"text-blue-400",children:"REWARD TOKEN"}),(0,a.jsx)("div",{className:"h-36 overflow-y-auto border-blue-100 [&>*]:border-b",children:Z.map(e=>(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)(u.Z,{icon:e.icon,name:e.name,symbol:e.symbol,tokenAddress:e.address,rewardsMode:"claim"})},e.address))})]})]}),(0,a.jsx)("div",{className:"flex border-t border-blue-100 p-6",children:(0,a.jsx)(c.Z,{className:"w-full cursor-pointer rounded-[100px] bg-emerald-600 px-4 py-2 text-center text-white hover:bg-emerald-700",href:"/restake/".concat(y.slug?y.slug:y.symbol),onClick:()=>{k(!1),C(!1),L()},children:"Done"})})]})}},10399:function(e,t,s){s.d(t,{e:function(){return n},Z:function(){return _}});var a,n,l=s(81438),r=s(66427),i=s(83062),o=s(32725),d=s(95011),u=s(73244),c=s(36069),m=s(42371),h=s(4766),x=s(89832),b=s(77723),f=s(22102),p=s(19842),g=s(27196),v=s(68137),w=s(93134),j=s(62687),N=s(34023),y=s(72918),k=s(43424);let T="depositValue",S="deposit-form";function D(e){var t,s;let{token:a}=e,{address:n,isAddressRestricted:i}=(0,g.Z)(),d=(0,y.ZP)(e=>e.setStep),D=(0,y.ZP)(e=>e.updateTransaction),P=(0,y.ZP)(e=>e.resetFailedTransactions),E=(0,y.ZP)(e=>e.transaction),M=(0,y.ZP)(e=>e.approvalTransaction),[L,C]=(0,r.useState)(!1),Z=(0,y.ZP)(e=>e.resetAll);(0,r.useEffect)(()=>{L||(Z(),C(!0))},[L,Z]);let[A,_]=(0,r.useState)(!1),{data:I,isLoading:W}=(0,v.Z)({address:n,tokenAddress:a.address,query:{enabled:!!n}}),{amountAsShares:O,register:R,handleSubmit:B,isValid:q,onMaxHandler:F,watchedAmount:U}=(0,j.i)({token:a,interact:"deposit",inputId:T}),[X,K]=(0,c.nj)(O,500);(0,r.useEffect)(()=>{K(O)},[O,K]);let{isDelegated:z,operatorSummary:H,isLoading:Q}=(0,w.Z)(),{deposit:G,manualDeposit:V}=(0,p.Q)({token:a,inputAmount:X,interact:"deposit"}),{approve:J,approvalAmount:Y,allowanceRefetch:$}=(0,f.o)({tokenAddress:null==a?void 0:a.address,interact:"deposit",onTxnSuccess:async()=>{await $(),null==V||V()}}),ee=(null!=Y?Y:0n)<X,et=U&&(null==a?void 0:a.usd)?Number(U)*a.usd:0,es=()=>{D({bigintAmount:X,strategyAddress:null==a?void 0:a.strategyAddress,amount:Number((0,m.b)(X,null==a?void 0:a.decimals))}),z?(_(!0),ee?null==J||J():null==G||G()):d(y.qJ.delegate)},ea=document.getElementById(y.Bn),en=(0,r.useMemo)(()=>{let e=[{status:E.status,blockNumber:E.blockNumber,hash:E.hash,label:"Deposit",subLabel:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Lm,{value:E.amount,format:"balance"})," ",null==a?void 0:a.symbol]}),write:G}];return(ee||M.status!==o.TransactionStatus.NotStarted)&&e.unshift({status:M.status,blockNumber:M.blockNumber,hash:M.hash,label:"Approve",subLabel:null==a?void 0:a.symbol,write:J}),e},[E.status,E.blockNumber,E.hash,E.amount,null==a?void 0:a.symbol,G,ee,M.status,M.blockNumber,M.hash,J]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{onSubmit:e=>{B(es)(),e.preventDefault()},className:"flex h-full w-full flex-col",id:S,children:[(0,l.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,l.jsxs)("div",{className:"flex gap-5 text-white",children:[(0,l.jsx)(h._T,{intent:"DisplayM",children:"Deposit"}),(0,l.jsxs)(h._T,{intent:"TextS",className:"flex w-fit items-center gap-2 rounded-full border px-4 py-2",children:[(0,l.jsx)(b.Z,{src:(null==a?void 0:a.icon)||"",symbol:a.symbol,size:h.dr.XS}),(0,l.jsx)("span",{className:"inline-block sm:hidden",children:null==a?void 0:a.symbol}),(0,l.jsx)("span",{className:"hidden sm:inline-block",children:null==a?void 0:a.name})]})]}),(0,l.jsx)("div",{className:"flex h-full w-full items-center",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex w-full items-center justify-between gap-4",children:[(0,l.jsx)("input",{...R(T,{required:!0}),type:"number",placeholder:"0.0",min:0,step:"any",className:"h-32 w-full bg-transparent text-DisplayM font-medium tabular-nums text-white outline-none [appearance:textfield] sm:text-Display3XL [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,l.jsx)(h.xk,{className:"whitespace-nowrap rounded-full text-white",intent:"secondary",onClick:F,children:(0,l.jsxs)(h._T,{intent:"TextM",weight:"medium",font:"ibmPlexMono",className:"text-TextXS sm:text-TextM",children:["MAX:"," ",W?(0,l.jsx)(h.yg,{className:"w-32"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Lm,{value:null!==(t=null==I?void 0:I.value)&&void 0!==t?t:0,format:"balance"})," ",null==a?void 0:a.symbol]})]})})]}),(0,l.jsx)("div",{className:"text-white-500",children:(0,l.jsx)(h._T,{intent:"DisplayXS",font:"ibmPlexMono",children:(0,l.jsx)(h.Lm,{value:et,format:"tvlUSD"})})})]})}),(0,l.jsxs)("div",{className:"mb-8 flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,l.jsx)("span",{className:"text-white-500",children:"Restaked Balance: "}),a?(0,l.jsxs)("span",{className:"text-white",children:[(0,l.jsx)(h.Lm,{value:null!==(s=a.formatWithDecimals(a.deposited.underlying))&&void 0!==s?s:0,format:"balance"})," ",null==a?void 0:a.symbol]}):(0,l.jsx)(h.yg,{className:"w-32"})]}),z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-white-500",children:"•"}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"text-white-500",children:"Delegated to: "}),Q?(0,l.jsx)(h.yg,{className:"w-32"}):(0,l.jsx)("span",{className:"text-white",children:(0,l.jsx)(x.D,{name:null==H?void 0:H.name,address:null==H?void 0:H.address,logo:null==H?void 0:H.logo})})]})]})]})]}),ea&&(0,u.createPortal)((0,l.jsx)(h.xk,{className:"text-white",size:h.dr.SM,disabled:i||!q,type:"button",onClick:()=>{let e=document.getElementById(S);if(null==e?void 0:e.requestSubmit)e.requestSubmit();else{let t=new Event("submit",{bubbles:!0,cancelable:!0});null==e||e.dispatchEvent(t)}},children:z?"SUBMIT":"NEXT"}),ea)]}),(0,l.jsx)(h.Co,{transactions:en,title:"Deposit",resetFailedTransactions:P,successModal:(0,l.jsx)(N.Z,{symbol:null==a?void 0:a.symbol,tokenData:a,tokenSlug:null==a?void 0:a.slug,mode:"deposit",setIsOpen:_}),isOpen:A,setIsOpen:_,blockExplorerURL:k.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL})]})}var P=s(63148),E=s(79311);let M="unstakeValue";function L(e){let{token:t}=e,s=(0,y.ZP)(e=>e.updateTransaction),a=(0,y.ZP)(e=>e.transaction),n=(0,y.ZP)(e=>e.resetFailedTransactions),[i,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),m=(0,y.ZP)(e=>e.resetAll);(0,r.useEffect)(()=>{d||(m(),u(!0))},[d,m]);let{amountAsShares:x,register:b,handleSubmit:f,isValid:p,onMaxHandler:g,watchedAmount:v}=(0,j.i)({token:t,interact:"withdraw",inputId:M}),[w,T]=(0,c.nj)(x,500);(0,r.useEffect)(()=>{T(x)},[x,T]);let S=v&&(null==t?void 0:t.usd)?Number(v)*t.usd:0,{queueWithdrawal:D}=(0,E.m)({inputAmount:w,token:t}),L=()=>{var e;s({amount:null!==(e=Number(v))&&void 0!==e?e:0}),null==D||D()},C=document.getElementById(y.Bn);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(P.Z,{title:"Unstake",token:t,tokenData:t,register:b,isValid:p,onMaxHandler:g,usdValue:S,onSubmit:f(()=>{o(!0),L()}),maxAmount:null==t?void 0:t.deposited.underlying,INPUT_ID:M,FORM_ID:"unstake-form",buttonContainerElement:C}),(0,l.jsx)(h.Co,{isOpen:i,setIsOpen:o,transactions:[{status:a.status,hash:a.hash,blockNumber:a.blockNumber,label:"Unstake",subLabel:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Lm,{value:a.amount,format:"balance"})," ",t.symbol]}),write:L}],title:"Unstake",resetFailedTransactions:n,successModal:(0,l.jsx)(N.Z,{tokenData:t,setIsOpen:o,tokenSlug:null==t?void 0:t.slug,symbol:t.symbol,mode:"withdraw"}),blockExplorerURL:k.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL})]})}var C=s(97885),Z=s(78130),A=s(30696);function _(e){let{token:t}=e,s=(0,A.Z)(),a=(0,i.useSearchParams)(),u=(null==a?void 0:a.get("flow"))==="true",c=null==a?void 0:a.get("action"),m=(0,y.ZP)(e=>e.step),h=(0,y.ZP)(e=>e.setStep),x=(0,y.ZP)(e=>e.isRestakeModalOpen),b=(0,y.ZP)(e=>e.setIsRestakeModalOpen),f=(0,y.ZP)(e=>e.delegationTransaction),p=m===y.qJ.deposit,g="unstake"===c,{isDelegated:v}=(0,Z.O4)();(0,r.useEffect)(()=>{b(c&&Object.values(n).includes(c))},[c,b]);let w=()=>{s.replace("/restake/".concat(t.slug))},j=(0,r.useMemo)(()=>{let e=g?[{label:"Unstake",isActive:!0,component:(0,l.jsx)(L,{token:t})}]:[{label:"Deposit",isActive:p,onClick:()=>h(y.qJ.deposit),component:(0,l.jsx)(D,{token:t}),labelClassName:"cursor-pointer"}];return g||v&&f.status===o.TransactionStatus.NotStarted||e.push({label:"Delegate",isActive:!p,component:(0,l.jsx)(d.Z,{token:t,delegateOnly:!1})}),e},[p,g,h,t,v,f.status]);return t||s.push("/restake"),(0,l.jsx)(C.t,{steps:j,isOpen:x,setIsOpen:b,buttonContainerId:y.Bn,onBack:()=>{(p||g)&&!u?w():u&&g?s.replace("/restake/".concat(t.slug)):u&&p?s.push("/?flow=true"):h(y.qJ.deposit)},onCloseModal:w,isFlow:u})}(a=n||(n={})).deposit="deposit",a.unstake="unstake",a.queueWithdrawal="queue-withdrawal"},65355:function(e,t,s){var a=s(81438),n=s(4766),l=s(3982),r=s(10399),i=s(72918),o=s(77723),d=s(27196),u=s(30696),c=s(61842);t.Z=function(e){let{token:t,showRestakeFlow:s=!0}=e,{isConnected:m}=(0,d.Z)(),{writeAccess:h}=(0,c.Z)(),x=(0,i.ZP)(e=>e.resetTransaction),b=(0,u.Z)(),f=e=>{b.replace("/restake/".concat(t.slug,"/?action=").concat(e)),x()},p=[{href:"/restake",label:(0,a.jsx)("span",{className:"text-blue-400 hover:text-blue-600",children:"Restake"})},{href:"/restake/".concat(t.slug),label:t.name}];return(0,a.jsxs)("div",{className:"col-span-3 mb-0 flex w-full flex-col gap-5 sm:col-span-2 sm:mb-4",children:[(0,a.jsx)(l.k,{navItems:p,address:t.address}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex w-full flex-row items-center gap-2 sm:w-auto sm:gap-4",children:[(0,a.jsx)(o.Z,{src:t.icon,symbol:t.symbol,size:n.dr.MD}),(0,a.jsx)(n._T,{className:"text-DisplayS sm:text-DisplayM",weight:"medium",intent:"DisplayM",children:t.name}),(0,a.jsx)(n._T,{intent:"TextXL",className:"hidden rounded-lg bg-blue-800/5 px-2 text-blue-500 sm:block",children:t.symbol})]}),s&&(0,a.jsxs)("div",{className:"ml-0 flex w-full items-center gap-2 sm:ml-auto sm:w-auto",children:[(0,a.jsx)(n.xk,{disabled:!m||!h,intent:"secondary",size:n.dr.SM,className:"w-full min-w-[104px] sm:w-auto",onClick:()=>f(r.e.unstake),children:(0,a.jsx)(n._T,{intent:"TextS",font:"ibmPlexMono",children:"UNSTAKE"})}),(0,a.jsx)(n.xk,{className:"w-full min-w-[104px] text-white sm:w-auto",disabled:!m||!h,size:n.dr.SM,onClick:()=>f(r.e.deposit),children:(0,a.jsx)(n._T,{intent:"TextS",font:"ibmPlexMono",children:"RESTAKE"})})]})]})]})}},97885:function(e,t,s){s.d(t,{t:function(){return o}});var a=s(81438),n=s(66427),l=s(84465),r=s(42140),i=s(64514);function o(e){let{isOpen:t,onCloseModal:s,onBack:o,isFlow:d,steps:u,buttonContainerId:c}=e,[m,h]=(0,n.useState)("animate-fadeIn"),[x,b]=(0,n.useState)(t);(0,n.useEffect)(()=>{b(t),h(t?"animate-fadeIn":"animate-fadeOut")},[t]);let f=u.findIndex(e=>e.isActive),p=u[f];return(0,a.jsx)(l.fC,{open:x,children:(0,a.jsxs)(l.VY,{className:"fixed left-0 top-0 z-10 flex h-screen w-screen flex-col bg-blue-800 pt-5 sm:pt-8 ".concat(!d&&m),onEscapeKeyDown:()=>{h("animate-fadeOut"),s()},children:[(0,a.jsxs)("div",{className:"mb-5 flex w-full items-center justify-between px-4 sm:mb-10 sm:px-8",children:[(0,a.jsx)("div",{onClick:o,className:"flex w-fit cursor-pointer items-center gap-0.5 text-white-500 hover:text-white-500/80",children:"← Back"}),(0,a.jsx)("div",{className:"w-fit text-white",children:(0,a.jsx)(i.Z,{intent:"secondary",connectedClassName:"text-white-400 hover:bg-white-100 hover:border-transparent py-1 px-3 hover:text-white-950",disconnectedClassName:"text-white-400 border-transparent hover:bg-white-100 hover:border-transparent py-1 px-3 hover:text-white-950"})})]}),(0,a.jsx)("div",{className:"h-full w-full px-4 sm:px-8",children:null==p?void 0:p.component}),(0,a.jsxs)("div",{className:"flex h-[68px] w-full items-center justify-between bg-white px-4 py-4 sm:px-8",children:[(0,a.jsx)("div",{className:"flex gap-6",children:u.map((e,t)=>{let{label:s,isActive:n,onClick:l,labelClassName:i}=e;return(0,a.jsxs)("div",{role:l?"button":void 0,className:(0,r.cn)("flex items-center gap-1",!n&&"text-blue-300"),onClick:l,children:[(0,a.jsx)("span",{className:(0,r.cn)("center h-5 w-5 rounded-[50%] border",n?"border-blue-700":"border-blue-300",i),children:t+1})," ",s]},s)})}),(0,a.jsx)("div",{id:c})]})]})})}},63148:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(81438),n=s(73244),l=s(4766),r=s(77723);function i(e){var t,s;let{title:i,token:o,tokenData:d,register:u,isValid:c,maxAmount:m,onMaxHandler:h,usdValue:x,onSubmit:b,INPUT_ID:f,FORM_ID:p,hideBalance:g=!1,buttonContainerElement:v}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("form",{onSubmit:e=>{b(),e.preventDefault()},className:"flex h-full w-full flex-col",id:p,children:[(0,a.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,a.jsxs)("div",{className:"flex gap-5 text-white",children:[(0,a.jsx)(l._T,{intent:"DisplayM",children:i}),(0,a.jsxs)(l._T,{intent:"TextS",className:"flex w-fit items-center gap-2 rounded-full border px-4 py-2",children:[(0,a.jsx)(r.Z,{src:(null==o?void 0:o.icon)||"",symbol:null==o?void 0:o.symbol,size:l.dr.XS}),null==o?void 0:o.name]})]}),(0,a.jsx)("div",{className:"flex h-full w-full items-center",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-4",children:[(0,a.jsx)("input",{...u(f,{required:!0}),type:"number",placeholder:"0.0",min:0,step:"any",className:"h-32 w-full bg-transparent text-DisplayM tabular-nums text-white outline-none [appearance:textfield] sm:text-Display3XL [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,a.jsx)(l.xk,{className:"whitespace-nowrap rounded-full text-white",onClick:h,children:(0,a.jsxs)(l._T,{intent:"TextM",weight:"medium",font:"ibmPlexMono",children:["MAX:"," ",d&&null!=m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Lm,{value:null!==(t=d.formatWithDecimals(m||d.deposited.underlying))&&void 0!==t?t:0,format:"balance"})," "]}):(0,a.jsx)(l.yg,{className:"inline w-32"})," ",null==o?void 0:o.symbol]})})]}),(0,a.jsx)("div",{className:"text-white-500",children:(0,a.jsx)(l._T,{intent:"DisplayXS",font:"ibmPlexMono",children:(0,a.jsx)(l.Lm,{value:x,format:"tvlUSD"})})})]})}),!g&&(0,a.jsx)("div",{className:"mb-8 flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,a.jsx)("span",{className:"text-white-500",children:"Restaked Balance: "}),d&&null!=m?(0,a.jsxs)("span",{className:"text-white",children:[(0,a.jsx)(l.Lm,{value:null!==(s=d.formatWithDecimals(m||d.deposited.underlying))&&void 0!==s?s:0,format:"balance"})," ",null==o?void 0:o.symbol]}):(0,a.jsx)(l.yg,{className:"w-32"})]})})]}),v&&(0,n.createPortal)((0,a.jsx)(l.xk,{className:"text-white",size:l.dr.SM,disabled:!c,type:"button",onClick:()=>{let e=document.getElementById(p);if(null==e?void 0:e.requestSubmit)e.requestSubmit();else{let t=new Event("submit",{bubbles:!0,cancelable:!0});null==e||e.dispatchEvent(t)}},children:"UNSTAKE"}),v)]})})}},22102:function(e,t,s){s.d(t,{o:function(){return x}});var a=s(66427),n=s(44493),l=s(44001),r=s(75624),i=s(4766),o=s(72918),d=s(27196),u=s(45363),c=s(26821),m=s(40589),h=s(31680);let x=e=>{let{tokenAddress:t,interact:s,onTxnSuccess:x,onMutate:b,onSuccess:f,onError:p}=e,{address:g}=(0,d.Z)(),[v,w]=(0,a.useState)(!1),j=(0,a.useCallback)(()=>w(!1),[]),N=(0,o.ZP)(e=>e.updateApprovalTransaction),y=!!g&&"deposit"===s,{data:k,refetch:T,queryKey:S}=(0,l.u)({address:t,abi:n.Wo,functionName:"allowance",args:[null!=g?g:h.r_,m.stakeConfig.strategyManagerAddress],query:{enabled:y}});(0,u.c_)({queryKey:S});let{data:D}=(0,r.G)({address:t,abi:n.Wo,functionName:"approve",args:[m.stakeConfig.strategyManagerAddress,h.j5],query:{enabled:y}}),{data:P,isPending:E,isError:M,writeContract:L}=(0,i.Hk)(c.v,{updateTransaction:N,onMutate:()=>{null==b||b()},onSuccess:e=>{null==f||f(e)},onError:()=>{null==p||p()},onTxnSuccess:async e=>{null==x||x(e)}});return{approvalAmount:k,allowanceRefetch:T,approvalData:P,approvalIsLoading:E,approvalError:M,approve:()=>(null==D?void 0:D.request)&&L(D.request),resetApproval:j,isApproved:v,setIsApproved:w}}},30520:function(e,t,s){s.d(t,{PV:function(){return j},mI:function(){return w},tF:function(){return N}});var a=s(81438),n=s(66427),l=s(11442),r=s(45632),i=s(75624),o=s(4766),d=s(2142),u=s(27196),c=s(63921),m=s(45268),h=s(38870),x=s(64087),b=s(40589),f=s(31680),p=s(3993),g=s(92355),v=s(7534);let w={address:b.stakeConfig.delegationManagerAddress,abi:d.oG,functionName:"completeQueuedWithdrawals"},j=e=>{var t,s;let{withdrawals:d,completeRedelegationForAllTokens:b=!1,enabled:g,onTxnSuccess:j,...y}=e,[k,T]=(0,n.useState)(!1),{address:S}=(0,u.Z)(),{refetch:D}=(0,c.Z)(),{data:{strategyTokenMap:P}}=(0,x.r)(),E=(0,h.U)(),{data:M,...L}=(0,m.$)({enabled:g}),[C,Z]=(0,n.useState)([]),A=(0,n.useMemo)(()=>{if(!d.length||!P)return{};let e=!1,t={};for(let s of d)s.strategies.forEach((a,n)=>{var l,r,i;let o=P[a.toLowerCase()];if(!o)return;let d=BigInt(null!==(r=s.shares[n])&&void 0!==r?r:0),u=null!==(i=null==o?void 0:o.convertSharesToUnderlying(d,{format:"decimal"}))&&void 0!==i?i:0;t[l=o.symbol]||(t[l]={token:o,shares:0n,underlying:0}),t[o.symbol].shares+=d,t[o.symbol].underlying+=u,d>0n&&(e=!0)});return T(e),t},[P,d]),_=Object.keys(A).reduce((e,t)=>{let s=t.includes("-")?M.batches:M.single,a=(null==s?void 0:s[t])||{nextCompletableWithdrawalBlock:f.j5};return a.nextCompletableWithdrawalBlock<e?a.nextCompletableWithdrawalBlock:e},f.j5),I=(0,r.O)({watch:!0,query:{enabled:!!S&&k}}),W=Object.keys(A),O=(0,a.jsx)(o.Lm,{value:null===(t=A[W[0]])||void 0===t?void 0:t.underlying,format:"balance"}),R=(0,n.useMemo)(()=>P?N({withdrawals:d,receiveAsTokens:!0,strategyTokenMap:P}):void 0,[d,P]),{data:B,error:q}=(0,i.G)({...w,args:R,query:{enabled:!!S&&!!R}});(0,n.useEffect)(()=>{(null==q?void 0:q.message)&&(console.error(q.message),l.v.addError(q.message))},[null==q?void 0:q.message]);let F=(0,n.useCallback)(async e=>{D(),L.refetch(),E.refetch();let t=await (0,p.Kl)(e);Z(e=>[...e,...t]),null==j||j(e)},[D,L,E,j]),U=W.length>1?"".concat(W.length," tokens"):(0,a.jsxs)(a.Fragment,{children:[O," ",W[0]]}),{data:X,isPending:K,isError:z,writeContract:H}=(0,v.Z)({loadingMsg:(0,a.jsxs)(a.Fragment,{children:["Withdrawing ",U,"..."]}),successMsg:(0,a.jsxs)(a.Fragment,{children:["Withdrew ",U,"!"]}),errorMsg:"Withdrawal submitted.",onTxnSuccess:F,...y}),Q=(0,n.useMemo)(()=>P?N({withdrawals:d,receiveAsTokens:!1,strategyTokenMap:P}):void 0,[d,P]),{data:G,error:V}=(0,i.G)({...w,args:Q,query:{enabled:!!S&&!!Q}});(0,n.useEffect)(()=>{(null==V?void 0:V.message)&&(console.error(V.message),l.v.addError(V.message))},[null==V?void 0:V.message]);let{data:J,isPending:Y,isError:$,writeContract:ee}=(0,v.Z)({loadingMsg:(0,a.jsx)(a.Fragment,{children:b?"Redelegating unstaked tokens...":(0,a.jsxs)(a.Fragment,{children:["Redepositing ",U]})}),successMsg:(0,a.jsx)(a.Fragment,{children:b?"Redelegated unstaked tokens!":(0,a.jsxs)(a.Fragment,{children:["Redeposited ",U]})}),errorMsg:"Redeposit submitted.",onTxnSuccess:F,...y}),et=(0,n.useCallback)(()=>{(null==B?void 0:B.request)&&H(null==B?void 0:B.request)},[null==B?void 0:B.request,H]),es=(0,n.useCallback)(()=>{(null==G?void 0:G.request)&&ee(G.request)},[null==G?void 0:G.request,ee]);return{completeWithdrawal:et,completeWithdrawalData:X,completeWithdrawalError:z,isCompleteWithdrawalLoading:K,completeWithdrawalToedgelayerAI:es,completeWithdrawalToedgelayerAIData:J,completeWithdrawalToedgelayerAIError:$,isCompleteWithdrawalToedgelayerAILoading:Y,withdrawalRootsCompleted:C,unstakeMenuProps:{withdrawalAmounts:A,handleCompleteWithdrawal:et,handleCompleteWithdrawalToedgelayerAI:es,nextCompletableWithdrawalBlock:_,currentBlock:null!==(s=I.data)&&void 0!==s?s:BigInt(0n),withdrawalsLoading:L.isLoading||K||Y,completeWithdrawal:et,completeWithdrawalToedgelayerAI:ee}}};function N(e){let{withdrawals:t=[],receiveAsTokens:s,strategyTokenMap:a}=e;return t.reduce((e,t)=>{let n=t.strategies.map(e=>{var t,s;return null!==(s=null===(t=a[e.toLowerCase()])||void 0===t?void 0:t.address)&&void 0!==s?s:f.r_});return[[...e[0],(0,g.YW)(t)],[...e[1],n],[...e[2],0n],[...e[3],s]]},[[],[],[],[]])}},19842:function(e,t,s){s.d(t,{Q:function(){return u}});var a=s(75624),n=s(4766),l=s(2142),r=s(72918),i=s(27196),o=s(26821),d=s(40589);let u=e=>{let{token:t,inputAmount:s,interact:u,onTxnSuccess:c,onSuccess:m,onError:h,onMutate:x}=e,{strategyAddress:b,address:f}=t,{address:p,isAddressRestricted:g}=(0,i.Z)(),v=(0,r.ZP)(e=>e.updateTransaction),{data:w,isError:j,refetch:N}=(0,a.G)({address:d.stakeConfig.strategyManagerAddress,abi:l.fj,functionName:"depositIntoStrategy",args:[b,f,s],query:{enabled:s>0&&!!p&&!g&&"deposit"===u}}),{writeContract:y,data:k,error:T,isPending:S}=(0,n.Hk)(o.v,{updateTransaction:v,onMutate:()=>{null==x||x()},onSuccess:e=>{null==m||m(e)},onError:()=>{null==h||h()},onTxnSuccess:()=>{null==c||c()}});return{deposit:()=>(null==w?void 0:w.request)&&y(w.request),depositData:k,depositError:T,depositConfigError:j,depositIsLoading:S,depositRefetch:N,manualDeposit:()=>y({address:d.stakeConfig.strategyManagerAddress,abi:l.fj,functionName:"depositIntoStrategy",args:[b,f,s]})}}},79311:function(e,t,s){s.d(t,{m:function(){return x}});var a=s(66427),n=s(11442),l=s(75624),r=s(4766),i=s(2142),o=s(32725),d=s(72918),u=s(27196),c=s(26821),m=s(40589),h=s(31680);let x=e=>{let{inputAmount:t,token:s,onTxnSuccess:x,onTxnRevert:b,onTxnSettled:f,onSuccess:p,onError:g,onMutate:v,enabled:w}=e,{strategyAddress:j}=s,{address:N}=(0,u.Z)(),y=(0,d.ZP)(e=>e.updateTransaction),k=!1!==w&&t>0&&!!N,T=(0,a.useMemo)(()=>({address:m.stakeConfig.delegationManagerAddress,abi:i.oG,functionName:"queueWithdrawals",args:[[{strategies:[j],shares:[t],withdrawer:N||h.r_}]],query:{enabled:k}}),[N,k,t,j]),S=(0,l.G)(T),{data:D,refetch:P,error:E}=S;(0,a.useEffect)(()=>{E&&k&&n.v.addError(E,{source:"useQueueWithdrawal",simulation:!0,contract:T.address,functionName:T.functionName,args:T.args})},[E,k,T]);let{data:M,isError:L,isPending:C,writeContract:Z}=(0,r.Hk)(c.v,{onTxnSettled:f,onMutate:()=>{null==v||v(),y({status:o.TransactionStatus.Pending})},onSuccess:e=>{null==p||p(e),y({hash:e})},onError:()=>{null==g||g(),y({status:o.TransactionStatus.Failed})},onTxnSuccess:e=>{null==x||x(e),y({status:o.TransactionStatus.Success,blockNumber:null==e?void 0:e.blockNumber})},onTxnRevert(e){null==b||b(e),n.v.addError(Error("Failed to queue withdrawal"),{source:"useQueueWithdrawal",hash:null==e?void 0:e.transactionHash,simulation:!1,receipt:e,contract:T.address,functionName:T.functionName,args:T.args})}});return(0,a.useEffect)(()=>{M&&n.v.addAction("transaction sent",{hash:M,source:"useQueueWithdrawal"})},[M]),{queueWithdrawal:(0,a.useCallback)(()=>(null==D?void 0:D.request)&&Z(D.request),[null==D?void 0:D.request,Z]),writeContract:Z,simulatedQueueWithdrawal:S,queueWithdrawalRefetch:P,queueWithdrawalData:M,queueWithdrawalError:L,isQueueWithdrawalLoading:C}}},81713:function(e,t,s){s.d(t,{a:function(){return d}});var a=s(66427),n=s(94188),l=s(38778),r=s(36269),i=s(27196);let o=e=>{let{strategyAddress:t,address:s}=e;return["completedWithdrawalRoots",t,s]},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{address:s}=(0,i.Z)(),d=(0,n.NL)(),u=(0,a.useMemo)(()=>o({strategyAddress:e,address:s}),[s,e]),c=(0,a.useCallback)(()=>{var e;return null!==(e=d.getQueryData(u))&&void 0!==e?e:[]},[u,d]),{data:m,...h}=(0,l.a)({queryKey:u,queryFn:c,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnReconnect:!0,...t,enabled:!1!==t.enabled&&!!s&&!!e}),{mutate:x}=(0,r.D)({mutationKey:u,mutationFn:async e=>e,onSuccess:e=>d.setQueryData(u,e)});return[null!=m?m:[],(0,a.useCallback)(e=>{var t;return x(Array.isArray(e)?e:e(null!==(t=c())&&void 0!==t?t:[]))},[c,x]),h]}},68137:function(e,t,s){var a=s(66427),n=s(44493),l=s(42371),r=s(37791),i=s(45363);t.Z=e=>{let{address:t,tokenAddress:s,query:o}=e,d=(0,r.N)({allowFailure:!1,contracts:[{address:s,abi:n.Wo,functionName:"balanceOf",args:t&&[t]},{address:s,abi:n.Wo,functionName:"decimals"},{address:s,abi:n.Wo,functionName:"symbol"}],query:o}),{data:u,queryKey:c}=d;(0,i.c_)({queryKey:c});let m=(0,a.useMemo)(()=>{if(!u)return;let[e,t,s]=u;return{value:e,decimals:t,symbol:s,formatted:e?(0,l.b)(e,t):"0"}},[u]);return{...d,data:m}}},45268:function(e,t,s){s.d(t,{$:function(){return d}});var a=s(66427),n=s(11442),l=s(38778),r=s(27196),i=s(77809),o=s(92355);let d=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:s}=(0,r.Z)(),{enabled:d,...u}=t,{data:c}=i.h.subgraph.getBlockHead.useQuery({subgraph:"edgelayerAI-delegation-raw-events"},{refetchInterval:5e3,trpc:{context:{skipBatch:!0}}}),m=(0,l.a)({queryKey:["allWithdrawalBucketsForWithdrawer",s,Number(null!=c?c:0)],queryFn:()=>(0,o.uP)(s),enabled:!1!==d&&!!s&&!!c,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnReconnect:!0,...u});return(0,a.useEffect)(()=>{m.error&&n.v.addError(m.error)},[m.error]),{...m,data:null!==(e=m.data)&&void 0!==e?e:{single:void 0,batches:void 0}}}},93134:function(e,t,s){var a=s(78130),n=s(21557);t.Z=()=>{let{data:e,isDelegated:t,isLoading:s}=(0,a.O4)(),{operatorSummary:l,isOperatorLoading:r}=(0,n.GO)(e);return{delegateAddress:e,isDelegated:t,isDelegatedToLoading:s,operatorSummary:l,isOperatorLoading:r,isLoading:s||r}}},25568:function(e,t,s){s.d(t,{z:function(){return h}});var a=s(66427),n=s(11442),l=s(38778),r=s(42140),i=s(27196),o=s(77809),d=s(92355),u=s(81713);let c=(e,t)=>s=>{let a=0n;return{withdrawals:s.filter(s=>{let n=e.includes(s.withdrawalRoot);if(!n){var l;let e=s.strategies.findIndex(e=>(0,r.EU)(e,t));a+=BigInt(null!==(l=s.shares[e])&&void 0!==l?l:0n)}return!n}),totalShares:a}},m=e=>{let{address:t,blockNumber:s,strategyAddress:a}=e;return["uncompletedWithdrawalsForStrategy",t,a,Number(null!=s?s:0n)]},h=function(e){let{enabled:t,select:s=e=>e,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{address:h}=(0,i.Z)(),{data:x}=o.h.subgraph.getBlockHead.useQuery({subgraph:"edgelayerAI-delegation-raw-events"},{refetchInterval:5e3,trpc:{context:{skipBatch:!0}}}),b=(0,a.useMemo)(()=>m({address:h,blockNumber:x,strategyAddress:e}),[h,e,x]),[f,p]=(0,u.a)(e),g=(0,l.a)({queryKey:b,queryFn:async()=>await (0,d.v8)(h,e,null!=x?x:0n),select:s,enabled:!1!==t&&!!h&&!!e&&!!x,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnReconnect:!0,...r}),v=(0,a.useMemo)(()=>{let t=g.data;if(!t)return;let s=c(f,e),a=s(t.completableWithdrawals),n=s(t.completableRedelegation);return{...t,completableWithdrawals:a.withdrawals,completableWithdrawalAmount:BigInt(a.totalShares),completableRedelegation:n.withdrawals,block:t.block}},[f,e,g.data]),w=(0,a.useCallback)(async e=>{p(t=>[...t||[],...e])},[p]),[j,N]=(0,a.useState)(v);return(0,a.useEffect)(()=>{v&&N(v)},[v]),(0,a.useEffect)(()=>{g.error&&n.v.addError(g.error)},[g.error]),{uncompletedWithdrawals:{...g,data:j},withdrawalsLoading:g.isLoading,removeCompleteWithdrawalRoots:w,...j}}},38870:function(e,t,s){s.d(t,{U:function(){return u}});var a=s(66427),n=s(77398),l=s(42140),r=s(77809),i=s(27196),o=s(45363);let d={eigenPodAddress:null,onBeaconChainUnproven:0n,onBeaconChainRestaked:0n,onBeaconChainNotRestaked:0n,inPodUnproven:0n,inPodRestakedWithdrawable:0n,inPodRestakedNotWithdrawable:0n,restakingPoints:0n,inPodFullWithdrawal:0n,totalRestakedBalance:0n,unrestakedBalance:0n,withdrawableBalance:0n,withdrawableNow:0n,withdrawableAfterCheckpoint:0n,totalUndelegatedWithdrawals:0n,totalOtherWithdrawals:0n,totalRestakableBalance:0n},u=function(){var e,t,s;let{podOwner:u,enabled:c,select:m=e=>({summary:e}),...h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{address:x}=(0,i.Z)(),b=null!==(s=null===(e=u||x)||void 0===e?void 0:e.toLowerCase())&&void 0!==s?s:"",f=r.h.native.pepePodSummary.useQuery({podOwner:(0,l.fr)(b)},{select:e=>m((null==e?void 0:e.eigenPodAddress)?e:d),enabled:!1!==c,...h});(0,o.lb)({subgraph:"eigen-pod-raw-events",queryKey:(0,n.Ol)(r.h.native.pepePodSummary)});let p=(0,a.useMemo)(()=>{var e;return{summary:{...d,...null===(e=f.data)||void 0===e?void 0:e.summary}}},[null===(t=f.data)||void 0===t?void 0:t.summary]);return{...f,data:p}}},57909:function(e,t,s){var a=s(66427),n=s(38778),l=s(29985),r=s(2142),i=s(26821),o=s(40589),d=s(77809);t.Z=()=>{let{data:e,isLoading:t,isError:s,isSuccess:u}=(0,n.a)({queryKey:["contract-status"],queryFn:()=>(0,l.J)(i.v,{contracts:[{address:o.stakeConfig.strategyManagerAddress,abi:r.fj,functionName:"paused",args:[0]},{address:o.stakeConfig.strategyManagerAddress,abi:r.fj,functionName:"paused",args:[1]},{address:o.stakeConfig.delegationManagerAddress,abi:r.oG,functionName:"paused",args:[0]}]}).then(e=>{let[t,s,a]=e;return{isDepositsPaused:!!(null==t?void 0:t.result),isWithdrawalsPaused:!!(null==s?void 0:s.result),isDelegationPaused:!!(null==a?void 0:a.result)}}),initialData:{isDepositsPaused:!1,isWithdrawalsPaused:!1,isDelegationPaused:!1}}),{data:c,isLoading:m,isError:h,isSuccess:x}=d.h.edgeConfig.getEdgeConfig.useQuery(void 0,{initialData:{isMaintenance:!1,isNativeMaintenance:!1,isLSTMaintenance:!1,isNativeDepositDisabled:!1,isLSTDepositDisabled:!1,isWithdrawalDisabled:!1,isDelegationDisabled:!1,isRewardsDisabled:!1}}),b={functionStatuses:{lstDeposits:{type:"LST Deposits",isAppPaused:c.isLSTDepositDisabled,isContractPaused:e.isDepositsPaused,isDisabled:c.isLSTDepositDisabled||e.isDepositsPaused,message:"Liquid Restaking deposits on edgelayerAI are temporarily paused."},nativeDeposits:{type:"Native Deposits",isAppPaused:c.isNativeDepositDisabled,isContractPaused:!1,isDisabled:c.isNativeDepositDisabled,message:"Native Restaking deposits on edgelayerAI are temporarily paused."},delegation:{type:"Delegation",isAppPaused:c.isDelegationDisabled,isContractPaused:e.isDelegationPaused,isDisabled:c.isDelegationDisabled||e.isDelegationPaused,message:"Delegation is temporarily paused."},withdrawal:{type:"Withdrawals",isAppPaused:c.isWithdrawalDisabled,isContractPaused:e.isWithdrawalsPaused,isDisabled:c.isWithdrawalDisabled||e.isWithdrawalsPaused,message:"Withdrawals are temporarily paused."},rewards:{type:"Rewards",isAppPaused:c.isRewardsDisabled,isContractPaused:!1,isDisabled:c.isRewardsDisabled,message:"The ability to view rewards is currently undergoing maintenance. Please check back later."}},isNativeMaintenanceMode:c.isNativeMaintenance,isLSTMaintenanceMode:c.isLSTMaintenance,bannerMessage:"",statusCount:0},f=Object.values(b.functionStatuses).filter(e=>null==e?void 0:e.isDisabled),p=(0,a.useMemo)(()=>f.length>1?"Multiple functions are currently paused.":1===f.length?f[0].message:"",[f]);return{data:{...b,statusCount:f.length,bannerMessage:p},isLoading:t||m,isError:s||h,isSuccess:x||u}}},4725:function(e,t,s){s.d(t,{F:function(){return l}});var a=s(45632),n=s(25899);let l=e=>{let{targetBlock:t,startBlock:s,format:l,useBlockNumberParams:r}=e,i=(0,a.O)({query:{refetchInterval:6e4},...r}),o=i.data;return{...i,data:o&&t?(0,n.H)(null!=s?s:Number(o),t,l):null,currentBlock:o}}},62687:function(e,t,s){s.d(t,{i:function(){return m}});var a=s(66427),n=s(34183),l=s(24013),r=s(33135),i=s(29164),o=s(27196),d=s(31680),u=s(68137);let c=Number(s(43424).O.NEXT_PUBLIC_CHAIN_ID),m=e=>{var t,s,m;let{token:h,interact:x,maxWithdrawalAmount:b,inputId:f}=e,[p,g]=(0,a.useState)(h);(0,a.useEffect)(()=>{h&&g(h)},[h]);let[v,w]=(0,a.useState)(0n),{address:j,chain:N}=(0,o.Z)(),y=null!=b?b:null==p?void 0:null===(t=p.deposited)||void 0===t?void 0:t.underlying,k=i.z.object({[f]:i.z.string().refine(e=>!(!p||!e||(null==N?void 0:N.id)!==c||!_||Number(e)<1*Math.pow(10,-p.decimals))&&(0,r.v)(e,p.decimals)<=_,{message:"Invalid deposit"})}),T=i.z.object({[f]:i.z.string().refine(e=>!(!e||(null==N?void 0:N.id)!==c||!y||!p||Number(e)<1*Math.pow(10,-p.decimals))&&(0,r.v)(e,p.decimals)<=y,{message:"Invalid withdrawal"})}),S=(0,l.cI)({resolver:(0,n.F)("withdraw"===x?T:k)}),{formState:{errors:D,isValid:P},setValue:E,getValues:M,watch:L}=S,C=M(f),Z=L(f),{data:A}=(0,u.Z)({address:j,tokenAddress:null!==(m=null==p?void 0:p.address)&&void 0!==m?m:d.r_,query:{enabled:!!j&&!!(null==p?void 0:p.address)}}),_=(null==A?void 0:A.value)||0n;return(0,a.useEffect)(()=>{if(P&&p){if("deposit"===x)return w((0,r.v)(C,p.decimals));if("withdraw"===x){let e=null!=y?y:0n,t=p.convertUnderlyingToShares((0,r.v)(C,p.decimals));t-e==-1n&&(t=e),w(t)}}},[P,Z,y,D,x,C,null==p?void 0:p.decimals,null==p?void 0:null===(s=p.deposited)||void 0===s?void 0:s.shares,p]),{amountAsShares:v,setAmountAsShares:w,onMaxHandler:()=>{if(p){if("deposit"===x)return E(f,p.formatWithDecimals(_,{string:!0}),{shouldValidate:!0});if(y)return E(f,p.formatWithDecimals(y,{string:!0}),{shouldValidate:!0});console.log("no underlying")}},inputId:f,errors:D,isValid:P,watchedAmount:Z,...S}}}}]);
//# sourceMappingURL=199-133aa8b0d95d51ca.js.map