(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5160],{58529:function(e,t,a){"use strict";a.d(t,{bL:function(){return h},wQ:function(){return f},Oq:function(){return p},sj:function(){return g}});var n=a(81438),s=a(66427),r=a(36069);a(6902),a(14271),a(39012);var l=a(30516),o=a(84235),i=a(4766),c=a(42140);function u(e,t){switch(t.type){case"SET_CURRENT_PAGE":return{...e,currentPage:t.payload};case"SET_TOTAL_PAGES":return{...e,totalPages:t.payload};case"SET_SEARCH_TERM":return{...e,searchTerm:t.payload};default:return e}}var d=a(85315);function p(e){let{children:t,className:a,...r}=e,[l,o]=(0,s.useState)(r.column.getSort());return(0,s.useEffect)(()=>{let e=()=>{o(r.column.getSort())};return r.column.addEventListener("sortChanged",e),()=>{r.column.removeEventListener("sortChanged",e)}},[r.column,o]),(0,n.jsxs)("div",{className:(0,c.cn)(a,"flex items-center"),onClick:()=>{"asc"===l?r.setSort("desc"):"desc"===l?r.setSort(null):r.setSort("asc")},children:[t,(0,n.jsxs)("div",{className:"flex flex-col text-blue-400",children:[(0,n.jsx)(d.Z,{className:(0,c.cn)("h-1.5 w-3 -rotate-90 cursor-pointer text-blue-400 opacity-50 transition-transform duration-200 [&>path]:stroke-[3]","asc"===l&&"opacity-100")}),(0,n.jsx)(d.Z,{className:(0,c.cn)("h-1.5 w-3 rotate-90 cursor-pointer text-blue-400 opacity-50 transition-transform duration-200 [&>path]:stroke-[3]","desc"===l&&"opacity-100")})]})]})}function g(e){let{displayName:t,...a}=e;return(0,n.jsx)(p,{...a,className:"ag-header-cell-label flex items-center gap-2",children:(0,n.jsx)(i._T,{intent:"TextXS",className:"text-left font-ibmPlexMono font-normal uppercase text-blue-400",children:t})})}function h(e){let{value:t=0,format:a="tvl",decimals:s=18,dataCypress:r,showDash:l=!1}=e,o=Number(t)?"text-blue-700":"text-blue-400";return(0,n.jsx)(i._T,{intent:"TextXS",className:(0,c.cn)("mr-6",o),dataCypress:r,children:l?"â€‘":(0,n.jsx)(i.Lm,{value:t||0,format:a,decimals:s})})}function f(e){var t;let{data:a=[],isLoading:d=!0,localStorageSortKey:p,columnDefs:g=[],title:h="",containerClassName:f,tableWrapperClassName:m,paginationPageSize:v=20,filter:x=[],filterValueComparator:T,search:b=!1,customOnGridReady:S,queryParams:w,setQueryParams:y,totalCount:j=0,...N}=e,[E,k]=(0,s.useState)(()=>[]),P=x.length>0,C=1==x.length,_=x.find(e=>{let{default:t}=e;return t}),M=null!==(t=null==_?void 0:_.value)&&void 0!==t?t:"All",[A,L]=(0,r._)(p,null),[R,O]=(0,r._)("".concat(p,"-filter"),M),[G,D]=(0,s.useReducer)(u,{currentPage:0,totalPages:0,searchTerm:""}),I=(0,s.useRef)(null);(0,s.useEffect)(()=>{a&&!d&&k(a)},[a,d]);let Z=(0,s.useCallback)(e=>!T||!e.data||T(e.data,R),[R,T]),F=(0,s.useCallback)(()=>!w&&!!P&&(!!C||R!==M),[R,M,P,C,w]);return d&&!w?(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col justify-between gap-2 rounded-lg bg-white p-2",f),children:[!!h&&(0,n.jsx)(i.yg,{intent:"TextL",className:"mt-2 w-1/4"}),(0,n.jsx)(i.yg,{className:(0,c.cn)("h-56",m)})]}):(0,n.jsxs)("div",{className:(0,c.cn)("flex flex-col justify-between rounded-lg bg-white p-2",f),children:[h&&"string"==typeof h&&(0,n.jsx)(i._T,{intent:"TextL",className:"mx-2 mb-2 text-blue-800",children:h}),h&&"object"==typeof h&&h,(0,n.jsxs)("div",{className:"flex flex-col justify-between gap-2 sm:flex-row sm:gap-0",children:[P&&!C&&(0,n.jsx)("div",{className:"flex gap-2 sm:justify-normal",children:x.map(e=>{let{value:t,label:a}=e;return(0,n.jsx)(i.xk,{intent:"pill",className:(0,c.cn)("font-blue-400 h-full rounded-3xl bg-white px-4 py-2 text-TextS hover:cursor-pointer",R===t&&"bg-blue-100"),onClick:()=>{var e;O(t),null===(e=I.current)||void 0===e||e.api.onFilterChanged()},children:a},t)})}),b&&(0,n.jsx)(i.oi,{value:G.searchTerm,onChange:e=>{var t;D({type:"SET_SEARCH_TERM",payload:e}),null===(t=I.current)||void 0===t||t.api.paginationGoToPage(0)},placeholder:"object"==typeof b?b.placeholder:"Search",containerClassName:(0,c.cn)("text-black-300 ml-auto w-full text-black-300",P&&!C&&"sm:w-60 md:w-60 lg:w-1/4",P&&C&&"sm:w-1/4 w-full ml-0"),size:i.dr.SM}),P&&C&&(0,n.jsxs)("div",{className:"text-ShortTextS bg-inputBg border-1 ml-autofled flex w-full cursor-pointer items-center gap-2 rounded-full border border-black-100 bg-white px-3 py-1.5 outline-none sm:ml-0 sm:w-fit",children:[(0,n.jsx)(l.fC,{className:"relative h-5 w-12 rounded-full border-lightblue-700 bg-lightblue-700 shadow-md ring-2 ring-lightblue-700 duration-100 focus:outline-none data-[state='checked']:bg-blue-700 data-[state='checked']:ring-blue-700",id:"hide-inactive-operators",checked:R==M,onCheckedChange:e=>{var t;O(e?"on":"off"),null===(t=I.current)||void 0===t||t.api.paginationGoToPage(0)},children:(0,n.jsx)(l.bU,{className:"block h-[18px] w-[18px] rounded-full bg-white-900 shadow-md data-[state='checked']:translate-x-[19px] data-[state='checked']:bg-white"})}),(0,n.jsx)("label",{className:"text-ShortTextS text-tertiaryFg w-full cursor-pointer truncate",htmlFor:"hide-inactive-operators",children:null==_?void 0:_.label})]})]}),d&&w?(0,n.jsx)("div",{className:(0,c.cn)("flex flex-col justify-between gap-2 rounded-lg bg-white p-2",f),children:(0,n.jsx)(i.yg,{className:(0,c.cn)("h-56",m)})}):(0,n.jsx)("div",{className:(0,c.cn)("ag-theme-quartz ag-theme-eigen min-h-56 grow",m),children:(0,n.jsx)(o.s,{rowData:E,rowClass:"hover:bg-blue-100 cursor-pointer",columnDefs:g,paginationPageSize:v,quickFilterText:G.searchTerm,onSortChanged:e=>{var t,a,n;let s=null!==(t=e.api.getColumnState().find(e=>!!e.sort))&&void 0!==t?t:null;y&&s&&y({...w,sortBy:s.colId,sortDirection:null===(a=s.sort)||void 0===a?void 0:a.toUpperCase()}),L(null!==(n=e.api.getColumnState().find(e=>!!e.sort))&&void 0!==n?n:null)},onGridReady:e=>{I.current=e,A?e.api.applyColumnState({state:[A]}):S&&S(e,A),D({type:"SET_TOTAL_PAGES",payload:e.api.paginationGetTotalPages()}),D({type:"SET_CURRENT_PAGE",payload:e.api.paginationGetCurrentPage()})},onPaginationChanged:e=>{D({type:"SET_TOTAL_PAGES",payload:e.api.paginationGetTotalPages()}),D({type:"SET_CURRENT_PAGE",payload:e.api.paginationGetCurrentPage()})},animateRows:!1,includeHiddenColumnsInQuickFilter:!0,suppressPaginationPanel:!0,suppressRowHoverHighlight:!0,doesExternalFilterPass:Z,isExternalFilterPresent:F,...N})}),N.pagination&&G.totalPages>1&&(0,n.jsx)(i.ML,{totalPages:G.totalPages,pageIndex:G.currentPage,truncate:!0,onPageChange:e=>{var t;null===(t=I.current)||void 0===t||t.api.paginationGoToPage(e)}}),N.pagination&&w&&y&&j>=a.length&&(0,n.jsx)(i.ML,{totalPages:j/v,pageIndex:w.skip&&(null==w?void 0:w.first)?(w.first+w.skip)/v-1:0,truncate:!0,onPageChange:e=>{y({...w,skip:e*v,first:10})}})]})}},72918:function(e,t,a){"use strict";a.d(t,{Bn:function(){return i},qJ:function(){return s}});var n,s,r=a(58911),l=a(32725),o=a(31680);let i="restake-flow-button-container";(n=s||(s={})).deposit="deposit",n.delegate="delegate";let c={...o.vO,amount:null,bigintAmount:null,strategyAddress:null},u={...o.vO,operatorAddress:null,operatorName:null,apr:null,estimatedRewards:null},d=(0,r.Ue)(e=>({transaction:c,updateTransaction:t=>e(e=>({transaction:{...e.transaction,...t}})),resetTransaction:()=>e({transaction:c,step:"deposit"}),delegationTransaction:u,updateDelegationTransaction:t=>e(e=>({delegationTransaction:{...e.delegationTransaction,...t}})),resetDelegationTransaction:()=>e({delegationTransaction:u}),approvalTransaction:o.vO,updateApprovalTransaction:t=>e(e=>({approvalTransaction:{...e.approvalTransaction,...t}})),resetAll:()=>e({transaction:c,delegationTransaction:u,approvalTransaction:o.vO,step:"deposit"}),step:"deposit",setStep:t=>e({step:t}),resetFailedTransactions:()=>e(e=>({transaction:{...e.transaction,status:e.transaction.status===l.TransactionStatus.Failed?l.TransactionStatus.NotStarted:e.transaction.status},delegationTransaction:{...e.delegationTransaction,status:e.delegationTransaction.status===l.TransactionStatus.Failed?l.TransactionStatus.NotStarted:e.delegationTransaction.status},approvalTransaction:{...e.approvalTransaction,status:e.approvalTransaction.status===l.TransactionStatus.Failed?l.TransactionStatus.NotStarted:e.approvalTransaction.status}})),isRestakeModalOpen:!1,setIsRestakeModalOpen:t=>e({isRestakeModalOpen:t})}));t.ZP=d},77723:function(e,t,a){"use strict";var n=a(81438),s=a(72110),r=a(4766);let l={[r.dr.XS]:24,[r.dr.SM]:32,[r.dr.MD]:48,[r.dr.LG]:60},o={[r.dr.XS]:"w-6 h-6",[r.dr.SM]:"w-8 h-8",[r.dr.MD]:"w-12 h-12",[r.dr.LG]:"w-16 h-16"},i={[r.dr.XS]:"text-[6px]",[r.dr.SM]:"text-[8px]",[r.dr.MD]:"text-[12px]",[r.dr.LG]:"text-[16px]"};t.Z=function(e){let{src:t,size:a=r.dr.MD,symbol:c,className:u,fill:d,priority:p=!1,style:g}=e,h=d?void 0:l[a];return t?(0,n.jsx)(s.default,{src:t.includes("https://")?t:"/".concat(t),width:h,height:h,alt:t,className:u,fill:d,priority:p,style:g}):(0,n.jsx)("div",{className:"flex shrink-0 items-center justify-center rounded-full border-2 border-gray-300 bg-white ".concat(o[a]),children:(0,n.jsx)(r._T,{className:"overflow-hidden text-blue-800 ".concat(i[a]),children:null==c?void 0:c.slice(0,4)})})}},78130:function(e,t,a){"use strict";a.d(t,{O4:function(){return N},_N:function(){return E},cp:function(){return k}});var n=a(81438),s=a(66427),r=a(33974),l=a(44001),o=a(37791),i=a(75624),c=a(19020),u=a(4766),d=a(2142),p=a(42140),g=a(32725),h=a(72918),f=a(27196),m=a(24343),v=a(63921),x=a(40589),T=a(77809),b=a(31680),S=a(92355),w=a(45363),y=a(7534);let j={address:x.stakeConfig.delegationManagerAddress,abi:d.oG},N=()=>{let{address:e,isConnected:t}=(0,f.Z)(),a=(0,l.u)({...j,functionName:"delegatedTo",args:e&&[e],query:{enabled:!!e}});(0,w.c_)({queryKey:a.queryKey});let{data:n,isSuccess:s}=a,r=s&&t&&n!==b.r_&&void 0!==n;return{...a,data:n,isDelegated:r}},E=e=>{var t,a,n,s;let r=(0,o.N)({contracts:[{...j,functionName:"stakerOptOutWindowBlocks",args:e&&[e]},{...j,functionName:"delegationApprover",args:e&&[e]}]});return{stakerOptOutWindowBlocks:(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t[0])||null,delegationApprover:(null==r?void 0:null===(a=r.data)||void 0===a?void 0:a[1])||null,hasDelegationApprover:(null==r?void 0:null===(s=r.data)||void 0===s?void 0:null===(n=s[1])||void 0===n?void 0:n.result)!==b.r_}},k=e=>{var t;let{operatorAddress:a,isDelegated:l,name:o,refetchUndelegatePrepare:d,onTxnSuccess:x,disableToast:w=!1,onSuccess:E,onError:k,onMutate:P}=e,{isConnected:C,address:_}=(0,f.Z)(),M=(0,h.ZP)(e=>e.updateDelegationTransaction),{refetch:A}=(0,v.Z)(),{refetch:L}=N(),{refetch:R}=(0,v.Z)(),{refetch:O}=T.h.operator.getOperatorSummary.useQuery({address:null==a?void 0:a.toLowerCase()},{enabled:!!a}),{refetch:G}=(0,S.zd)({enabled:!!_}),{refetchLastDelegationTimestamp:D}=(0,m.Z)(_),I=o||(0,n.jsx)(u.Lp,{address:a})||"operator",Z=(0,i.G)({...j,functionName:"delegateTo",args:[null!=a?a:b.r_,{signature:"",expiry:0n},(0,r.NC)("",{size:32})],query:{enabled:!l&&C&&!!a}}),{writeContract:F,data:q,isPending:U,isSuccess:B,isError:X}=(0,y.Z)({successMsg:"Delegated to ".concat(I,"!"),loadingMsg:"Delegating to ".concat(I,"..."),errorMsg:"Delegation submitted.",onTxnSettled:()=>{null==d||d()},onTxnSuccess:()=>{null==x||x(),(0,p.P_)(p.JT.delegate,"success"),O(),A(),L(),R(),G(),D(),M({status:g.TransactionStatus.Success})},onMutate:()=>{null==P||P(),M({status:g.TransactionStatus.Pending})},onSuccess:e=>{null==E||E(),M({hash:e})},onError:()=>{null==k||k(),M({status:g.TransactionStatus.Failed})},disableToast:w}),z=(0,s.useCallback)(()=>{var e;(null===(e=Z.data)||void 0===e?void 0:e.request)&&(null==F||F(Z.data.request))},[null==Z?void 0:null===(t=Z.data)||void 0===t?void 0:t.request,F]),{data:H,isLoading:Q,isSuccess:K,isError:J}=(0,c.A)({hash:q});return{delegateTo:z,delegateToData:q,isDelegateToLoading:U,isDelegateToSuccess:B,isDelegateToError:X,delegateToTxnData:H,isDelegateToTxnLoading:Q,isDelegateToTxnSuccess:K,isDelegateToTxnError:J,isDelegateToPrepareError:Z.isError,writeContract:F}}},7534:function(e,t,a){"use strict";a.d(t,{Z:function(){return f},p:function(){return h}});var n=a(81438),s=a(66427),r=a(11442),l=a(65542),o=a(77096),i=a(56359),c=a(4766);let u=(0,a(58911).Ue)(e=>({transactions:[],addTransaction:t=>e(e=>({transactions:[...e.transactions,t]})),removeTransaction:t=>e(e=>({transactions:e.transactions.filter(e=>e.id!==t)})),updateTransaction:(t,a)=>e(e=>({transactions:e.transactions.map(e=>e.id===t?{...e,...a}:e)}))}));var d=a(26821),p=a(43424);function g(e){let{msg:t,hash:a}=e;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{children:t}),(0,n.jsxs)("div",{children:["View on"," ",(0,n.jsx)("a",{href:"".concat(p.O.NEXT_PUBLIC_BLOCK_EXPLORER_URL,"/tx/").concat(a),className:"underline",target:"_blank",rel:"noreferrer",children:"Etherscan"})]})]})}let h=()=>{let e=(0,c.pm)(),t=u(e=>e.transactions),a=u(e=>e.updateTransaction),r=u(e=>e.removeTransaction);(0,s.useEffect)(()=>{t.forEach(t=>{let s=t.disableToast;if("pending"!==t.status||t.toastId)"pending"===t.status&&t.toastId&&t.hash?s||e.loading((0,n.jsx)(g,{msg:t.loadingMsg,hash:t.hash}),{id:t.toastId},!1):"success"===t.status&&t.toastId&&t.hash?(s||e.success((0,n.jsx)(g,{msg:t.successMsg,hash:t.hash}),{id:t.toastId}),a(t.id,{toastId:void 0}),r(t.id)):"error"===t.status&&t.toastId&&t.hash&&(s||e.info((0,n.jsx)(g,{msg:t.errorMsg,hash:t.hash}),{id:t.toastId}),a(t.id,{toastId:void 0}),r(t.id));else if(!s){let n=e.loading(t.loadingMsg,{id:t.id},!1);a(t.id,{toastId:n})}})},[t,a,r,e])};var f=e=>{let{loadingMsg:t="Transaction loading...",successMsg:a="Transaction successful",errorMsg:n="Transaction submitted.",onTxnSuccess:s,onTxnRevert:p,onTxnSettled:g,onTxnError:h,disableToast:f=!1,onSuccess:m,onError:v,onSettled:x,onMutate:T}=e,b=(0,c.pm)(),S=u(e=>e.addTransaction),w=u(e=>e.removeTransaction),y=u(e=>e.updateTransaction);return(0,o.S)({mutation:{onMutate:()=>{null==T||T();let e=(0,l.Z)();return S({id:e,status:"pending",loadingMsg:t,successMsg:a,errorMsg:n,disableToast:f}),{id:e}},onError:(e,t,a)=>{let{id:n}=a;w(n),null==v||v(e),b.dismiss(n),r.v.addError(e)},onSuccess:(e,t,a)=>{null==m||m(e);let{id:n}=a;y(n,{hash:e}),(0,i.e)(d.v,{hash:e,timeout:3e5}).then(e=>{"success"===e.status?(null==s||s(e),y(n,{status:"success"})):"reverted"===e.status&&(null==p||p(e),y(n,{status:"error"}),r.v.addError(e)),null==g||g(e)}).catch(e=>{r.v.addError(e),y(n,{status:"error"}),null==h||h()})},onSettled:()=>{null==x||x()}}})}},24343:function(e,t,a){"use strict";var n=a(66427),s=a(77809);t.Z=function(e){let{data:t,error:a,refetch:r}=s.h.rewards.getLastDelegationTimestamp.useQuery({earner:null!=e?e:""},{enabled:!!e}),l=(0,n.useMemo)(()=>(null==t?void 0:t.blockTimestamp)?t.blockTimestamp:0,[t]),o=(0,n.useMemo)(()=>Date.now()/1e3-l<172800,[l]);return{lastDelegationTimestamp:l,isRewardsPending:o,lastDelegationTimestampError:a,refetchLastDelegationTimestamp:r}}},39012:function(){}}]);
//# sourceMappingURL=5160-24315c5072d0ab92.js.map